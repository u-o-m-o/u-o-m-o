webpackJsonp([6,131],{"9bGG":function(e,t,n){"use strict";t.a=O;var r=n("d6ZO"),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=32,h=100,b=null,y=!1,g=[],E=function e(){b&&clearTimeout(b),y=!0,b=setTimeout(function(){y=!1},h)},_=function e(t){0===g.length&&window.addEventListener("scroll",E),g.push(t)},w=function e(t){var n=g.indexOf(t);g.splice(n,1),0===g.length&&window.removeEventListener("scroll",E)};function O(t){return function(e){function a(){var e,t;i(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(p(p(t=l(this,(e=u(a)).call.apply(e,[this].concat(r))))),"state",{isHovering:!1}),m(p(p(t)),"handlers",{onMouseOver:function e(){return t._setHover(!0)},onMouseLeave:function e(){return t._setHover(!1)}}),t}return f(a,e),s(a,[{key:"componentDidMount",value:function e(){_(this)}},{key:"componentWillUnmount",value:function e(){this.hoverTimer&&clearTimeout(this.hoverTimer),w(this)}},{key:"_setHover",value:function e(t){var n=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=t&&y?setTimeout(function(){return n._setHover(t)},h):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},v)}},{key:"render",value:function e(){return r.createElement(t,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),a}(r.Component)}},Hdz3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=n("d6ZO"),o=n.n(r),a=n("lVil"),i=n("dZgC");function c(){return o.a.createElement("div",{className:"NewsConversationsDropdown"},o.a.createElement("div",{className:"content"},o.a.createElement(i.b,null,function(e){return o.a.createElement(a.a,{requestContext:e})})))}},PrM5:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=d;var o="facebook",a="twitter",i="google",c="youtube",s="gplus",l="microsoft",u="etsy",f="instagram";function d(e){var t;return r(t={},o,{connected:e.connected_to_facebook||!1}),r(t,i,{connected:e.connected_to_google||!1}),r(t,c,{connected:e.connected_to_youtube||!1}),r(t,s,{connected:!!e.gplus_url,url:e.gplus_url}),r(t,l,{connected:e.connected_to_microsoft||!1}),r(t,a,{connected:!!e.twitter_url,url:e.twitter_url}),r(t,u,{connected:e.connected_to_etsy||!1}),r(t,f,{connected:e.connected_to_instagram||!1}),t}},Svvu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("hlP+"),o=n.n(r),s=n("BVzu"),a=n("XZ9g"),l=n.n(a),i=n("/4D9"),u=n.n(i),f=n("W/Cr"),d=n("DLm7"),p=n("EAiy"),c;function m(){}Object.assign(m.prototype,o.a),Object.assign(m.prototype,{connect:function e(a,i){var c=this;(i=Object.assign({},{success:function e(){},error:function e(){},complete:function e(){}},i)).rerequest_facebook_email?u()().then(function(e){var t;e.default.ensureInit(function(e){e.login(function(e){var t=e.authResponse,n,r;t&&(n=(n=t.grantedScopes)?n.split(","):[],r=t.userID);var o=n.find(function(e){return"email"===e}),a={id:r};"connected"===e.status&&o?i.success(a):i.error(a),i.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},p.a)}):l()().then(function(e){var t,n=e.default.getWindowOptions(),r=window.open("/connect/"+a+"/","",n);if(!r)return s.default.showError(f.a._("You must enable popups!")),void i.error({network:a,alertedUpstream:!0});var o=d.a.setInterval(function(){r.closed&&(clearInterval(o),c.handleComplete({network:a,error_message:"Window closed."}))},1e3);c.once("connect:"+a,function(e){clearInterval(o),e.error_message?i.error(e):i.success(e),i.complete()})})},complete:function e(t){this.handleComplete(t)},handleComplete:function e(t){var n="connect:"+t.network,r;if("facebook"===t.network){var o=t.id;o&&"string"!=typeof o&&(t.error_message="Facebook id must be of string type")}this.trigger(n,t)}}),Object.assign(m,{instance:function e(){return c||(c=new m),c},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&m.instance().complete(e.data)}),t.default=m},T0l7:function(e,t,n){"use strict";t.c=i,t.d=c,t.a=u,t.b=f;var o=n("/e0Y"),s=n("Cjb7"),r=n("THYI"),l=n.n(r),a="collaborator_approve_invite";function i(e,t){return l.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function c(e,t){return l.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function u(n,r){return function(e){var t;return l.a.create("BoardInviteResource",{board_id:n,invited_user_id:r}).callUpdate().then(function(){o.a.trackEvent(a,"success"),s.a.instance.publish(n,"boardApprovedCollaboratorInvite",{userId:r})}).catch(function(){return o.a.trackEvent(a,"error")})}}function f(a,i,c){return function(e){var t=a.invited_user,n=a.status,r=a.board.id,o;return l.a.create("accepted"===n?"BoardCollaboratorResource":"BoardInviteResource",{ban:c,board_id:r,field_set_key:"boardEdit",invited_user_id:t.id}).callDelete({showError:!1}).then(function(){s.a.instance.publish(r,"boardWriteAccessUpdated"),c&&s.a.instance.publish(r,"boardBannedCollaborator"),i&&(s.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),s.a.instance.publish(r,"boardRemovedCollaboratorSelf"))})}}},U7FU:function(e,t,n){"use strict";var r=n("d6ZO"),i=n.n(r),o=n("DUIN"),a=n("GGB8"),c=n.n(a),s=n("IaRT"),l=n.n(s),u=n("gEaE");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=3,w=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],O=function e(t,n){var r=t.name,o=t.image_thumbnail_url;return i.a.createElement("div",{className:c()("Image","Module","boardMessageRep",n)},i.a.createElement("img",{alt:r,src:o}))},C=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0,o=3<arguments.length?arguments[3]:void 0,a={small:"sm",medium:"md",normal:"lg"};return i.a.createElement(u.b,{display:"flex",alignItems:"center"},i.a.createElement(u.l,{collaborators:r.map(function(e,t){return{name:e.full_name||e.email||e.username||"user ".concat(t),src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:a[t]}))},k=function(e){function t(){return d(this,t),v(this,b(t).apply(this,arguments))}return y(t,e),m(t,[{key:"getUsersToShow",value:function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return void 0!==r&&(n=n.filter(function(e){return e.id!==r})),n.concat(t.map(function(e){return{full_name:e,first_name:e,username:e}})).slice(0,3)}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.emails,o=t.shouldLink,a=t.size,i=t.users,c=this.getUsersToShow(r,i),s=c.length<=3?w[c.length-1]:[];return n?O(n,a):0<c.length?C(a,s,c,o):null}}]),t}(r.Component);function I(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}}E(k,"defaultProps",{shouldLink:!1,size:"medium"}),t.a=Object(o.connect)(I)(k)},XSNT:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function r(e,t){var n;return s(this,r),h(v(v(n=f(this,d(r).call(this,e,t)))),"handleChange",function(e){n.props.onChange&&n.props.onChange(e.target.value),n.setState({value:e.target.value,hasChanged:!0})}),n.state={isFocused:n.props.focused||!1,value:n.props.value,hasChanged:void 0!==n.props.value},n}return p(r,e),u(r,[{key:"componentDidMount",value:function e(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"getId",value:function e(){return this.props.id}},{key:"getValue",value:function e(){return this.state.value}},{key:"focus",value:function e(){this._input.focus()}},{key:"render",value:function e(){var n=this;return o.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function e(t){n._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}]),r}(r.Component);b.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(t){n.e(212).then(function(e){t(n("ZIw6"))}.bind(null,n)).catch(n.oe)})}},cD7N:function(e,t,n){"use strict";var a=n("Cjb7"),r=n("THYI"),c=n.n(r),o=n("Svvu"),s=n("DLm7"),i=n("EAiy"),l=1e3,u=110;function f(){}Object.assign(f.prototype,{handleConnect:function e(n,r,o){if(r&&!i.a.isLimitedLogin()){var t={success:function(e){var t={network:n,data:e};this._internalConnectNetwork(r,t,o)}.bind(this),error:function e(t){o.error&&o.error(t)},complete:function e(){o.complete&&o.complete()}};this._externalConnectNetwork(n,r,t)}else{var a={network:n};this._internalConnectNetwork(r,a,o)}},updateConnectStatus:function e(){var t;c.a.create("UserResource",{user_id:i.a.get("id"),username:i.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;i.a.set(t),a.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){n?o.default.instance().connect(t,r):r.success&&r.success({})},_internalConnectNetwork:function e(t,n,r){var o=this,a=c.a.create("UserSocialNetworkResource",n);(t?a.callCreate():a.callDelete()).then(function(e){o.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).finally(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case o.default.FACEBOOK:n="UserFacebookFriendsResource";break;case o.default.TWITTER:n="UserTwitterFriendsResource";break;case o.default.GOOGLE:n="UserGmailFriendsResource";break;case o.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var o={resource:n,network:t,error:r};a.a.instance.publish("site","friendImportCompleted",o)},pollForFriends:function e(n,r){var o=this,t=(r=r||{}).resourceOptions||{},a=this._getResourceNameForNetworkFriends(n);if(a){var i=c.a.create(a,t);i.callGet({showError:!1}).then(function(){var e=r.success;e&&e(i),o._handleFriendsImported(n,i,null)},function(e){if(e.api_error_code===u)s.a.setTimeout(function(){o.pollForFriends(n,r)},l);else{var t=r.error;t&&t(),o._handleFriendsImported(n,i,e)}})}}});var d=null;f.instance=function(){return d||(d=new f),d},t.a=f},cy6F:function(e,t,n){"use strict";t.a=c;var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){var t=e.mask,n=e.loading,r=e.size;return o.a.createElement("div",null,t&&o.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&o.a.createElement("div",{className:"Spinner"},o.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}c.defaultProps={loading:!0,mask:!0,size:"medium"}},fvzG:function(e,t,n){"use strict";t.h=o,t.e=a,t.g=i,t.b=c,t.c=v,t.d=s,t.f=l,t.a=u,t.k=h,t.j=b,t.i=d;var r=n("THYI"),m=n.n(r);function o(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function i(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function c(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function v(e){return{type:"CONVERSATION_CREATE",payload:e}}function s(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}}function u(){return function(e){var t;m.a.create("ConversationBadgeResource",{}).callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}}function h(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function b(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}var y=(f=0,function(){return f++}),f;function d(f,d,p){var e,t=new Promise(function(u){(e=function e(n,t){var r=d.text,o=d.pinId,a=d.boardId,i=d.userId,c=d.didItId,s=t();function l(){var e=m.a.create("ConversationMessagesResource",{conversation_id:f,text:r,pin:o,board:a,user:i,user_did_it_data:c,source:p}),t="".concat(y());e.callCreate().then(function(e){n(b(f,t,e.resource_response.data.id))}),n(h(f,{text:r,sender:s.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:o?s.pins[o]:null,type:"message",user_did_it_data:null,user:null})),u()}s.conversations.data[f]?l():m.a.create("ConversationResource",{conversation_id:f}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;n(v(t)),l()})}).getPromise=function(){return t}});return e}},lVil:function(e,t,n){"use strict";var r=n("d6ZO"),p=n.n(r),o=n("DUIN"),d=n("5tOk"),m=n("W/Cr"),a=n("THYI"),l=n.n(a),c=n("fvzG"),v=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function h(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?E(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function a(){var e,r;s(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return _(E(E(r=h(this,(e=b(a)).call.apply(e,[this].concat(n))))),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),_(E(E(r)),"handleInviteAcceptResponse",function(){var e;r.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),l.a.create("ContactRequestAcceptResource",{contact_request:r.props}).callUpdate().then(function(e){var t=r.props.dispatch;if(r.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var n=e.resource_response.data;t(Object(c.c)(n)),t(Object(c.h)(n.id)),t(Object(c.g)(n.id))}})}),_(E(E(r)),"handleInviteDeclineResponse",function(){var e;r.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),l.a.create("ContactRequestIgnoreResource",{contact_request:r.props}).callDelete().then(function(){r.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})}),r}return y(a,e),f(a,[{key:"renderRequestText",value:function e(t,n,r){if(t){var o=t.name,a=t.url;if(o&&a)return d.h(m.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:o.toString(),boardUrl:a.toString(),senderName:n,senderUsername:r})}return d.h(m.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})}},{key:"renderAcceptedBoard",value:function e(){var t=this.props.board;if(!t)return null;var n=t.name,r=t.url,o=t.image_thumbnail_url;return p.a.createElement(v.t,{href:r},p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.u,{shape:"rounded",width:50,height:50},p.a.createElement(v.p,{alt:n,src:o,naturalHeight:60,naturalWidth:60})),p.a.createElement(v.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},n),p.a.createElement(v.K,{color:"darkGray",size:"sm"},m.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.sender,o=this.state,a=o.contactRequestCompleted,i=o.isAccepted,c=o.isAcceptButtonLoading,s=o.isIgnoreButtonLoading;if(a)return n&&i?this.renderAcceptedBoard():null;var l=r.image_large_url,u=r.full_name,f=r.username;return p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.b,{height:40,width:40,flex:"none"},p.a.createElement(v.t,{href:"/"+f+"/"},p.a.createElement(v.a,{name:f,src:l}))),p.a.createElement(v.b,{paddingX:3,flex:"grow"},p.a.createElement(v.b,{marginBottom:3},p.a.createElement(v.K,null,p.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(n,u,f)}}))),p.a.createElement(v.b,{display:"flex",marginLeft:-1,marginRight:-1},p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{disabled:s,onClick:this.handleInviteDeclineResponse,size:"sm",text:m.a._("Decline","ignore contact request")})),p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{color:"red",disabled:c,onClick:this.handleInviteAcceptResponse,size:"sm",text:m.a._("Accept","accept contact request")})))))}}]),a}(r.PureComponent),O=Object(o.connect)()(w),C=n("pN+K"),k=n("+B8E");function I(e){var t=e.contactRequests,n=e.requestContext;if(!t)return null;var r=t.filter(function(e){var t=e.board;return t&&t.name&&t.url}),o=!0;if(n){var a=new k.c(n,"web_inbox_collab_invites");o=0<r.length&&a.enabled()}return o?p.a.createElement("div",null,r.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(O,e))})):null}var S=Object(C.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(I),j=n("GGB8"),N=n.n(j),R=n("nM9s"),T=n("IaRT"),P=n.n(T),x=100,A=1e3;function L(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick,o;return t||n?(o=A<t?m.a._("1000+ contact requests","messaging"):x<=t&&t<=A?m.a._("100+ contact requests","messaging"):d.h(m.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:"".concat(t)}),p.a.createElement(v.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:10,paddingRight:10}},paddingY:1},p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(R.a,{className:N()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:o,type:"borderless"})))):null}var M=Object(C.b)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(L);function B(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(M,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),p.a.createElement(v.b,{padding:2},p.a.createElement(v.K,{size:"sm"},m.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(O,e))})):null}var D=Object(C.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(B),U=n("U7FU"),F=n("tmfO"),H=n("y2lE"),q=n("/S3G"),z=n("MQ2h"),V=n.n(z);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function Z(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?$(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return(Q=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){var t=e.name,n=e.emails,r=e.users,o=e.viewerId,a=r.filter(function(e){return e.id!==o});return p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||a.map(function(e){return e.first_name||e.full_name}).concat(n).join(", "))}function ne(e){var t=e.message,n=e.viewerId,r=t.board,o=t.created_at,a=t.pin,i=t.sender,c=t.text,s=t.user,l=c,u=i.id===n,f=u?m.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):i.first_name;return l?l&&u&&(l=m.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+l):a?l=d.h(m.a._("{{ senderName }} sent a Pin","messaging"),{senderName:f}):r?l=d.h(m.a._("{{ senderName }} sent a board","messaging"),{senderName:f}):s&&(l=d.h(m.a._("{{ senderName }} sent a user profile","messaging"),{senderName:f})),p.a.createElement(v.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},p.a.createElement(v.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},p.a.createElement(v.K,{color:"darkGray",size:"sm",truncate:!0},l)),p.a.createElement(v.b,{flex:"none"},p.a.createElement(v.K,{color:"gray",size:"xs",truncate:!0},m.a.getHumanizedTimesince(o,!0))))}function re(e){var t=e.board,n=e.pin,r=e.user,o=null;if(n){var a=n.images["236x"]||n.images["136x136"];o=p.a.createElement(v.u,{shape:"rounded",wash:!0,height:60,width:40},p.a.createElement(v.p,{alt:"",src:a.url,naturalWidth:a.width,naturalHeight:a.height,color:n.dominant_color,fit:"cover"}))}else t?o=p.a.createElement(v.u,{shape:"rounded",width:40,height:40},p.a.createElement(v.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(o=p.a.createElement(v.b,{shape:"rounded",width:40,height:40},p.a.createElement(v.a,{name:r.full_name,src:r.image_large_url})));return o?p.a.createElement(v.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},p.a.createElement(v.b,{display:"block"},o)):null}var oe=function(e){function o(){var e,i;G(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ee($($(i=Z(this,(e=J(o)).call.apply(e,[this].concat(n))))),"state",{isAnimatingOut:!1,unread:i.props.data.unread||0}),ee($($(i)),"handleHideConversation",function(e){e.stopPropagation();var t=i.props,n=t.data,r=t.dispatch,o=n.id,a;l.a.create("ConversationResource",{conversation_id:o}).callDelete({showError:!1}),i.setState({isAnimatingOut:!0}),setTimeout(function(){r(Object(c.d)(o))},500),i.removeConversationChatHead(o),i.logConversationItemHide(o)}),ee($($(i)),"handleConversationItemClick",function(){var e=i.props.data;i.setState({unread:0}),e.board||i.showConversationChatHead(e),i.logConversationItemClick()}),ee($($(i)),"logConversationItemClick",function(){var e;(0,i.props.contextLog)(101,{component:54,element:277})}),ee($($(i)),"logConversationItemHide",function(e){var t;(0,i.props.contextLog)(182,{component:54,element:277,conversation_id:e})}),i}return X(o,e),Y(o,[{key:"showConversationChatHead",value:function e(t){var n=this.props.dispatch,r=t.id;n(Object(c.h)(r)),n(Object(c.g)(r)),n(q.a)}},{key:"removeConversationChatHead",value:function e(t){var n=this.props.dispatch;n(Object(c.e)(t)),n(Object(c.b)(t))}},{key:"renderItemContent",value:function e(){var t=this.state.isAnimatingOut,n=this.props,r=n.data,o=n.viewerId,a=r.board,i=r.emails,c=r.last_message,s=r.name,l=r.users,u=i||[];return p.a.createElement("div",{className:N()("ConversationListItemReact",{conversationHidden:t})},p.a.createElement(v.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},p.a.createElement(U.a,{board:a,emails:u,users:l})),p.a.createElement(v.b,{display:"flex",width:"85%",height:"100%"},p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},p.a.createElement(te,{name:s,emails:i||[],users:l,viewerId:o}),p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column"},c?p.a.createElement(ne,{message:c,viewerId:o}):null)),c?p.a.createElement(re,c):null),0<this.state.unread?p.a.createElement("span",{className:"conversationUnreadMark"}):null,p.a.createElement(R.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:m.a._("×","close button"),type:"borderless"}))}},{key:"render",value:function e(){var t=this.props.data,n=t.board,r=t.users;return r&&r.length?n?p.a.createElement(F.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):p.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}]),o}(r.Component);function ae(e){var t;return{viewerId:e.viewer.id}}var ie=Object(z.compose)(Object(o.connect)(ae),H.a)(oe),ce=function e(o,t){var n=t.emails,r=t.users,a=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(U.a,{emails:[n],size:"small"}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},n),p.a.createElement("span",{className:"contactDescription"},m.a._("Email friend","on selected contact list"))))}},i=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=t[0].id===o?t[1]:t[0],r=n.full_name;return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(U.a,{size:"small",users:[n]}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},r),p.a.createElement("span",{className:"contactDescription"},m.a._("On Pinterest","info about a contact"))))};return p.a.createElement("div",null,n&&0<n.length?a(n):i(r))};function se(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,o=e.handleContactWrapperClick,a=e.isSelected,i=e.isUser,c=["selectionIndicator","contactCircleRep","selectionIndicator"];return p.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return o(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},ce(n,r),a?p.a.createElement("div",{className:c.join(" ")},p.a.createElement("em",null)):null)}se.defaultProps={isSelected:!1};var le=n("tZWC");function ue(e){var n=e.onClickRemove,t=e.tokenizedItems;return r.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},r.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return r.createElement("div",{className:"tokenItem",key:t,style:{position:"relative"}},r.createElement(R.a,{className:"tokenRemove",onClick:function e(){return n(t)},showText:!1,text:m.a._("close conversation chathead"),type:"borderless"},r.createElement(v.b,{position:"absolute",color:"lightGray",display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,dangerouslySetInlineStyle:{__style:{borderRadius:6}}},r.createElement(v.n,{icon:"cancel",accessibilityLabel:"",size:5,color:"darkGray"}))),"string"!=typeof e?r.createElement(v.a,{size:"sm",name:e.full_name,src:e.is_default_image?void 0:e.image_large_url}):r.createElement(v.a,{size:"sm",name:e}))}),0<t.length?r.createElement(v.b,{width:5}):null),r.createElement("div",{className:"textFieldContainer"}))}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function ve(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?ge(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=8,we=2,Oe=function(e){function o(){var e,f;de(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(ge(ge(f=ve(this,(e=he(o)).call.apply(e,[this].concat(n))))),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),Ee(ge(ge(f)),"onHandleContactClick",function(e,t){var n=f.state,r=n.selectedEmails,o=n.selectedUsers,a=e?o:r,i=e?t.id:t,c=a[i];a[i]=!c,c?f.removeTokenItem(t):f.addTokenItem(t)}),Ee(ge(ge(f)),"getSelectedEmails",function(){var t=f.state.selectedEmails;return Object.keys(t).filter(function(e){return t[e]})}),Ee(ge(ge(f)),"getSelectedUsers",function(){var t=f.state.selectedUsers;return Object.keys(t).filter(function(e){return t[e]})}),Ee(ge(ge(f)),"handleTypeaheadKeyDown",function(e){var t=f.state,n=t.contactCounter,r=t.selectedEmails,o=t.selectedUsers,a=t.tokenizedItems,i=t.value;if(8===e.keyCode&&n&&!i){var c=a.pop(),s,l,u;(!!c.id?o:r)[c.id||c]=!1,f.setState({contactCounter:n-1,tokenizedItems:a})}}),Ee(ge(ge(f)),"handleInviteItemClick",function(e,t){var n=f.state,r=n.selectedUsers,o=n.selectedEmails,a=t?r:o,i=e.id||e;a[i]||(a[i]=!0,f.addTokenItem(e))}),Ee(ge(ge(f)),"handleRemoveItem",function(e){var t=f.state.tokenizedItems[e];f.removeTokenItem(t)}),Ee(ge(ge(f)),"handleSendMessage",function(){var e=f.getSelectedEmails(),t=f.getSelectedUsers(),n=f.props.dispatch,r;l.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;n(Object(c.c)(t)),n(Object(c.h)(t.id)),n(Object(c.g)(t.id))})}),Ee(ge(ge(f)),"addTokenItem",function(e){var t=f.state,n=t.contactCounter,r=t.tokenizedItems;f.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})}),Ee(ge(ge(f)),"removeTokenItem",function(t){var e=f.state,n=e.contactCounter,r=e.tokenizedItems,o=e.selectedUsers,a=e.selectedEmails,i,c,s;(!!t.id?o:a)[t.id||t]=!1,t.id?f.setState({contactCounter:n-1,tokenizedItems:r.filter(function(e){return e.id!==t.id})}):f.setState({contactCounter:n-1,tokenizedItems:(r||[]).filter(function(e){return e!==t})})}),Ee(ge(ge(f)),"renderSendMessageButton",function(){return p.a.createElement(R.a,{className:"sendNewMessageButton",hasText:!0,onClick:f.handleSendMessage,showText:!0,text:m.a._("Next","open the new chat"),type:"borderless"})}),Ee(ge(ge(f)),"renderCancelMessageButton",function(){var e=f.props.handleCancelNewMessageClick;return p.a.createElement(R.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:m.a._("Cancel","cancel new message view"),type:"borderless"})}),f}return be(o,e),me(o,[{key:"getContactItem",value:function e(t,n,r){var o=t.emails,a=t.users,i;return r&&a?a[0].id===n?a[1]:a[0]:o[0]}},{key:"render",value:function e(){var s=this,t=this.props,n=t.conversationItems,l=t.viewerId,r=this.state,o=r.contactCounter,u=r.selectedUsers,f=r.selectedEmails,a=r.value,d=new Set,i=n.map(function(e,t){var n=e.emails,r=e.users;n||(n=[]),r||(r=[]);var o=r.length+n.length;if(0<o&&o<=2){var a=0===n.length,i=s.getContactItem(e,l,a);if(i){var c=i.id||i;if(!d.has(c))return d.add(c),p.a.createElement(se,{className:"conversationContactContainer",contactItem:i,conversationItem:e,currentUserID:l,handleContactWrapperClick:s.onHandleContactClick,isSelected:u[c]||f[c],isUser:a,key:c+"-".concat(t)})}}return null});return p.a.createElement("div",null,p.a.createElement(v.b,{display:"flex",justifyContent:"between",padding:3},p.a.createElement(v.K,{size:"sm",color:"gray"},m.a._("New message","conversations")),0<o?this.renderSendMessageButton():this.renderCancelMessageButton()),p.a.createElement(v.b,{color:"lightGray",display:"flex",padding:3},p.a.createElement(v.b,{display:"flex",alignItems:"center",marginRight:2},p.a.createElement(v.K,{size:"sm"},m.a._("To:","new message"))),p.a.createElement(v.b,{display:"flex",position:"relative",flex:"grow"},p.a.createElement(ue,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),p.a.createElement(le.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function e(t){return s.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),a?null:p.a.createElement("div",{className:"contactsContainer"},i))}}]),o}(r.Component),Ce=function e(t){var n;return{viewerId:t.viewer.id}},ke=Object(z.compose)(Object(o.connect)(Ce))(Oe);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function Re(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?Ae(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}function xe(e,t){return(xe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=function(e){function o(){var e,s;Se(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Le(Ae(Ae(s=Re(this,(e=Te(o)).call.apply(e,[this].concat(n))))),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),Le(Ae(Ae(s)),"handleInviteResponse",function(e){var t=s.props.boardInviteItem,n=t.board,r=void 0===n?{}:n,o=t.invited_user,a=void 0===o?{}:o;s.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var i={board_id:r.id,invited_user_id:a.id},c=l.a.create("BoardInviteResource",i);(e?c.callUpdate():c.callDelete()).then(function(){s.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})}),s}return Pe(o,e),Ne(o,[{key:"getBoardRep",value:function e(t,n){return p.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},p.a.createElement("div",{className:"Image Module boardMessageRep"},p.a.createElement("div",{className:"heightContainer"},p.a.createElement("img",{alt:t,src:n}))))}},{key:"getBoardInfo",value:function e(t,n){return p.a.createElement("a",{href:n},p.a.createElement("div",{className:t},t))}},{key:"getInviteeInfo",value:function e(t){var n=t.full_name;return p.a.createElement("div",{className:"inviterLine"},Object(d.h)(m.a._("{{ fullName }} invited you to this board"),{fullName:n}))}},{key:"getRequesterInfo",value:function e(t){var n=t.username,r=t.full_name,o=Object(d.h)(m.a._('<a href="/{{ username }}/">{{ fullName }}</a> wants to join your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))}},{key:"getJoinedText",value:function e(t){var n=t.username,r=t.full_name,o=Object(d.h)(m.a._('<a href="/{{ username }}/">{{ fullName }}</a> joined your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))}},{key:"renderPendingLayout",value:function e(t,n,r){var o=this,a=t.image_thumbnail_url,i=t.name,c=t.url,s=r?c+"invite":c;return p.a.createElement("div",{className:"pending"},p.a.createElement("div",{className:"left"},this.getBoardRep(i,a),p.a.createElement("div",{className:"description"},this.getBoardInfo(i,s),r?this.getRequesterInfo(n):this.getInviteeInfo(n))),p.a.createElement("div",{className:"actions"},p.a.createElement(R.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return o.handleInviteResponse(!1)},text:m.a._("Decline","decline board collaborator invite or request")}),p.a.createElement(R.a,{className:N()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return o.handleInviteResponse(!0)},text:m.a._("Accept","accept board invite")})))}},{key:"renderCompletedLayout",value:function e(t,n,r){var o=t.image_thumbnail_url,a=t.name,i=t.url;return p.a.createElement("div",{className:"success displayed"},p.a.createElement("div",{className:"left"},this.getBoardRep(a,o),p.a.createElement("div",{className:"description"},this.getBoardInfo(a,i),p.a.createElement("div",{className:"inviterLine"},r?this.getJoinedText(n):m.a._("You joined this board","board invites")))))}},{key:"render",value:function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user,o=t.invited_user,a=r.id===o.id;return p.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r,a):this.renderCompletedLayout(n,r,a))}}]),o}(r.Component);function Be(e){var t=e.boardInvites,n=e.boardJoinRequests;return t||n?p.a.createElement("div",null,n?n.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Me,{boardInviteItem:e}),p.a.createElement(v.j,null))}):null,t?t.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Me,{boardInviteItem:e}),p.a.createElement(v.j,null))}):null):null}var De=Object(z.compose)(Object(C.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(C.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(Be),Ue=n("dZgC"),Fe=n("nX0T"),He=n("woYD");function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t&&Ve(e.prototype,t),n&&Ve(e,n),e}function Ge(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?Je(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=500,$e="existingConversationsView",et="newMessageView",tt="contactRequestsView",nt=function(e){function a(){var e,n;ze(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Xe(Je(Je(n=Ge(this,(e=Ke(a)).call.apply(e,[this].concat(r))))),"state",{currentView:$e,hoverColor:"transparent"}),Xe(Je(Je(n)),"handleCancelSecondaryView",function(){n.setState({currentView:$e})}),Xe(Je(Je(n)),"handleNewMessageButtonClick",function(){n.setState({currentView:et}),n.logNewMessageButtonClick()}),Xe(Je(Je(n)),"handleViewContactRequestsClick",function(){n.setState({currentView:tt})}),Xe(Je(Je(n)),"handleScroll",function(){var e,t;n.props.isFetching||(n._container&&n._container.scrollHeight-n._container.scrollTop-n._container.clientHeight)<Qe&&n.fetchMore()}),Xe(Je(Je(n)),"handleMouseHoverSVG",function(){n.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),Xe(Je(Je(n)),"handleMouseLeaveSVG",function(){n.setState({hoverColor:"transparent"})}),Xe(Je(Je(n)),"logNewMessageButtonClick",function(){Object(He.a)(101,{component:54,element:275})}),n}return Ye(a,e),We(a,[{key:"componentDidMount",value:function e(){var t;this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(He.a)(7161,{})}},{key:"componentWillUnmount",value:function e(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function e(){var t=this.props,n=t.isAtEnd,r=t.isFetching,o=t.fetchMoreData,a=t.isFullAuth;!r&&a&&(n?this._container.removeEventListener("scroll",this.handleScroll):o())}},{key:"renderNewMessageView",value:function e(){var t=this.props.conversations,n=void 0===t?[]:t;return p.a.createElement("div",{className:"newMessageContainer"},p.a.createElement(ke,{conversationItems:n,handleCancelNewMessageClick:this.handleCancelSecondaryView}))}},{key:"renderContactRequestsView",value:function e(){return p.a.createElement("div",{className:"contactRequestsContainer"},p.a.createElement(D,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))}},{key:"renderEmptyMessagesNewMessageUpsell",value:function e(){return p.a.createElement("div",{className:"EmptyConversations Module"},p.a.createElement("div",{className:"icon"}),p.a.createElement("div",{className:"intro"},p.a.createElement("div",null,m.a._("Send messages to your friends!")),p.a.createElement("div",null,m.a._("Plan projects, swap ideas and share your best discoveries."))))}},{key:"renderExistingConversationsView",value:function e(){var t=this.props,n=t.conversations,r=void 0===n?[]:n,o=t.isAtEnd;return p.a.createElement("div",{className:"existingConversationsContainer"},p.a.createElement(v.b,{position:"relative"},p.a.createElement(v.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},p.a.createElement(v.o,{onClick:this.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose icon button")})),p.a.createElement(v.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},p.a.createElement(v.K,{bold:!0,size:"md",align:"center"},m.a._("Messages","header text for conversations dropdown")))),p.a.createElement("div",{className:"viewContactRequestsButtonContainer"},p.a.createElement(M,{onClick:this.handleViewContactRequestsClick})),p.a.createElement("div",{className:"existingConversationItemsWrapper"},p.a.createElement("div",{className:"boardInvitesContainer"},p.a.createElement(De,null)),p.a.createElement("div",{className:"boardInviteContactRequestsContainer"},p.a.createElement(Ue.b,null,function(e){return p.a.createElement(S,{requestContext:e})})),p.a.createElement("ul",{className:"conversationItems"},0===r.length&&o?this.renderEmptyMessagesNewMessageUpsell():r.map(function(e,t){return p.a.createElement("li",{className:"conversationItemWrapper",key:e.id},p.a.createElement(ie,{data:e}),t<r.length-1?p.a.createElement(v.j,null):null)}))))}},{key:"renderMessageView",value:function e(){switch(this.state.currentView){case $e:return this.renderExistingConversationsView();case et:return this.renderNewMessageView();case tt:return this.renderContactRequestsView()}}},{key:"render",value:function e(){var n=this;return p.a.createElement(Fe.a,{view:42,viewParameter:203},p.a.createElement("div",{className:"conversationPanel",ref:function e(t){n._container=t}},this.renderMessageView()))}}]),a}(r.Component);function rt(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var ot=function e(t){return Object.keys(t).map(function(e){return t[e]})},at=function e(t){var n=t.conversations,r=t.viewer;return{conversations:rt(ot(n.data)),isFullAuth:r.isAuth&&!r.isLimitedLogin}},it=t.a=Object(z.compose)(Object(o.connect)(at),Object(C.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}))(nt)},nM9s:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var _=n("d6ZO"),r=n.n(_),i=n("FHH+"),o=n("GGB8"),w=n.n(o),O=n("cy6F");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function a(){var e,t;c(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(m(m(t=u(this,(e=f(a)).call.apply(e,[this].concat(r))))),"handleClick",function(e){e&&e.preventDefault(),t.props.loading||(t.props.src?Object(i.a)(t.props.src):t.props.onClick&&t.props.onClick(e),t.props.stopPropagation&&e.stopPropagation())}),t}return d(a,e),l(a,[{key:"render",value:function e(){var t=this.props,n=t.accessibilityLabel,r=t.children,o=t.disabled,a=t.hasIcon,i=t.htmlType,c=t.id,s=t.itemProp,l=t.large,u=t.loading,f=t.onMouseDown,d=t.onMouseEnter,p=t.onMouseLeave,m=t.rel,v=t.rounded,h=t.showText,b=t.style,y=t.text,g=t.type,E=w()(this.props.className,{Button:"plain"!==g,Module:"plain"!==g,btn:"borderless"!==g&&"plain"!==g,hasIcon:a,hasText:h,rounded:!0===v,leftRounded:"left"===v,rightRounded:"right"===v,borderless:"borderless"===g,primary:"primary"===g,disabled:o,large:l});return _.createElement("button",{"aria-label":n||null,className:E,disabled:o,id:c,itemProp:s,onClick:this.handleClick,onMouseDown:f,onMouseEnter:d,onMouseLeave:p,rel:m,style:b,type:i},u?_.createElement(O.a,{size:"small"}):null,r,a?_.createElement("em",null):null,_.createElement("span",{className:h?"buttonText":"accessibilityText"},y))}}]),a}(_.Component);v(h,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},"pN+K":function(e,t,n){"use strict";t.a=N,t.c=L;var u=n("d6ZO"),r=n.n(u),o=n("DUIN"),a=n("lJK6"),v=n("FfPm"),i=n("IaRT"),c=n.n(i),s=n("S+Qs");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(null==e)return{};var n=d(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function d(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function p(e){return b(e)||h(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function b(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){S(t,e,n[e])})}return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function w(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?I(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)};function N(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}var R=function e(t){var m={};return function(c){return function(e,l){var t=e.resources,r=t.fetching,u=t.data,n=c.some(function(e){var t=e.name,n=e.options;return r[t]&&r[t][N(n,l)]}),f={},d,p=[];c.forEach(function(e){var t=e.name,n=e.options,r=e.key;if(u[t]){var o=N(n,l);if(m[t]||(o in u[t]?v.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"success",v:1}):Object.keys(u[t]).length?v.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"error",v:1}):v.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"warn",v:1})),m[t]=!0,u[t][o]){var a=u[t][o],i=a.data,c=a.nextBookmark,s=a.error;f[r]=i,p.push(c),s&&(d=s)}}else v.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var o=c.every(function(e){var t=e.key;return void 0!==f[t]}),a,i;return{resourceLoaded:o,isAtEnd:o&&!n&&p.every(function(e){return"-end-"===e}),isFetching:n,nextBookmark:p[0],resourceData:f,error:d}}}},T=function e(i){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(l){var e,t;return t=e=function(e){function a(){var e,t;g(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(I(I(t=w(this,(e=O(a)).call.apply(e,[this].concat(r))))),"loadData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(s.a)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),S(I(I(t)),"loadMoreData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(s.d)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),S(I(I(t)),"resourcesHash",JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t.props)})}))),t}return C(a,e),_(a,[{key:"componentDidMount",value:function e(){!1!==c.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function e(t){var n=p(Object.keys(this.props)).concat(p(Object.keys(t))),r=!0,o=!1,a=void 0;try{for(var i=n[Symbol.iterator](),c;!(r=(c=i.next()).done);r=!0){var s=c.value;if("resourceData"===s){if(!j(this.props.resourceData,t.resourceData))return!0}else if(this.props[s]!==t[s])return!0}}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function e(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.error,o=n.isAtEnd,a=n.isFetching,i=n.resourceData,c=n.resourceLoaded,s=f(n,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete s.onResourceError,delete s.onResourceLoaded,u.createElement(l,Object.assign({},i,s,{error:r,fetchMoreData:function e(){return t.loadMoreData(t.props)},isAtEnd:o,isFetching:a,refreshData:function e(){return t.loadData(t.props)},resourceLoaded:c}))}}]),a}(u.Component),S(e,"WrappedComponent",l),S(e,"displayName",1===i.length?i[0].name:"".concat(i.length," resources")),t}},P=function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t={name:n.name,options:n.options||{},key:n.key||"data"};return Object(o.connect)(R(e)([t]))(T([t],r)(e))}},x=P;t.b=P;var A=function e(t){var a=t.name,i=t.options;return function(e,t){var n=e.resources.data;if(n[a]){var r=N(i,t),o;if(n[a][r])return{data:n[a][r].data}}return{data:null}}};function L(e){var t=e.name,n=e.options;return Object(o.connect)(A({name:t,options:n||{}}))}},tZWC:function(e,t,n){"use strict";var r=n("d6ZO"),d=n.n(r),o=n("DUIN"),a=n("GGB8"),p=n.n(a),c=n("PrM5"),m=n("W/Cr"),v=n("XSNT"),i=n("IaRT"),s=n.n(i),l=n("z/23"),u=n("9bGG"),f=n("gEaE");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?C(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function a(){var e,r;b(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return k(C(C(r=E(this,(e=_(a)).call.apply(e,[this].concat(n))))),"renderInviteButton",function(e){var t=r.props.inviteQueue;if(!t)return null;var n={text:m.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(n.text=m.a._("Remove","Remove a board collaborator invite"),n.color="gray"),d.a.createElement(f.c,n)}),r}return w(a,e),g(a,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()}},{key:"render",value:function e(){var t=this.props,n=t.is_pinner?m.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?m.a._("Facebook"):"gplus_non_pinner"===t.type?m.a._("Google"):m.a._("Enter an email address");return d.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),d.a.createElement(f.b,{position:"relative"},t.send_pin_image?d.a.createElement("span",{className:"typeaheadImg"},d.a.createElement("img",{alt:"",src:t.send_pin_image})):null,d.a.createElement("p",{className:p()("typeaheadName",{hasImage:t.send_pin_image})},t.label),d.a.createElement("div",{className:"titleWrapper"},d.a.createElement("i",{className:p()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),d.a.createElement("p",{className:"title"},n)),d.a.createElement(f.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(t.id))))}}]),a}(r.Component),S=Object(u.a)(I),j=n("Svvu"),N=n("cD7N");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=j.default.FACEBOOK,P=j.default.GPLUS,x=j.default.TWITTER,A=j.default.YAHOO;function L(e){N.a.instance().handleConnect(e,!0,{})}function M(e){var t,n=e.network,r=(R(t={},T,m.a._("Find friends from Facebook")),R(t,P,m.a._("Find friends from Google+")),R(t,x,m.a._("Find friends from Twitter")),R(t,A,m.a._("Find friends from Yahoo")),t);return d.a.createElement("div",{className:"socialConnect",role:"listitem"},d.a.createElement(f.O,{onTouch:function e(){return L(n)},fullWidth:!1},d.a.createElement("div",{className:"socialConnectItem"},d.a.createElement("div",{className:"left"},d.a.createElement("div",{className:p()("icon","socialConnect-".concat(n))},d.a.createElement("em",null))),d.a.createElement("div",{className:"right"},d.a.createElement("h4",{className:"title"},r[n])))))}var B=n("skut"),D=n("Cjb7"),U=n("5tOk"),F=n("woYD"),H=n("T0l7");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function z(e){return G(e)||W(e)||V()}function V(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function W(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function G(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?ee(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=[j.default.FACEBOOK,j.default.TWITTER,j.default.GPLUS],re=function(e){function o(){var e,i;K(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(ee(ee(i=J(this,(e=X(o)).call.apply(e,[this].concat(n))))),"state",{networks:i.props.viewer.isAuth?i.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),te(ee(ee(i)),"onUserInviteClick",function(e){var t=e.id,n=e.full_name,r=i.props,o=r.boardId,a=r.onInviteItemClick;o?a(Object(H.d)(o,[t]),{type:"user",userName:n}):a(e,!0)}),te(ee(ee(i)),"handleBodyClick",function(e){i._results.contains(e.target)||i.setState({open:!1})}),te(ee(ee(i)),"handleTypeaheadSuggestionsChange",function(e){var t=i.props.viewer;i.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})}),te(ee(ee(i)),"handleOnEmailInviteClick",function(){var e=i.props,t=e.boardId,n=e.onInviteItemClick,r=e.value;t?n(Object(H.c)(t,[r]),{type:"email",email:r}):n(r,!1)}),te(ee(ee(i)),"subscriber",D.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){i.setState({networks:Object(c.a)(n)})})),te(ee(ee(i)),"logTypeaheadInput",function(e){Object(F.a)(4113,{component:13029,element:1043,entered_query:e})}),te(ee(ee(i)),"logSearchContactItemClick",function(e){var t=i.props.value;Object(F.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),te(ee(ee(i)),"renderResultItems",function(){var e=i.props,r=e.changeOnTextHover,o=e.inviteQueue,t=p()("Typeahead","userSelect",{open:i.state.open}),n=i.state.typeaheadSuggestions.map(function(t,n){return d.a.createElement(S,Object.assign({key:n,onClick:function e(){i.onUserInviteClick(t),i.logSearchContactItemClick(n)},onHoverEnd:function e(){return r?i.restoreTextFieldValue():null},onHoverStart:function e(){return r?i.forceTextFieldValue(t.label):null},inviteQueue:o},t))}).concat(i.getStaticItems()).map(function(e,t){return d.a.createElement("li",{key:t},e)});return d.a.createElement("div",{className:t,ref:function e(t){i._results=t},style:{overflow:"auto",zIndex:1e3}},d.a.createElement("ul",null,n))}),i}return Q(o,e),Z(o,[{key:"componentDidMount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.value;this.setState({open:0<n.length})}},{key:"componentWillUnmount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()}},{key:"getStaticItems",value:function e(){return z(this.getEmailItems()).concat(z(this.getSocialItems(this.state.networks)))}},{key:"getEmailItems",value:function e(){var t=this.props.value;return[d.a.createElement(l.a,{email:t,isValid:Object(U.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}},{key:"getSocialItems",value:function e(t){var n;return ne.filter(function(e){return!t||!1===t[e].connected}).map(function(e,t){return d.a.createElement(M,{key:"socialConnect-".concat(e),network:e})})}},{key:"forceTextFieldValue",value:function e(t){this.previousValue=this.props.value,this.props.onChange(t)}},{key:"restoreTextFieldValue",value:function e(){this.props.onChange(this.previousValue),delete this.previousValue}},{key:"render",value:function e(){var n=this,t=this.props,r=t.boardId,o=t.className,a=t.inBoardCollaboratorInviter,i=t.onChange,c=t.onKeyDown,s=t.showInputPlaceholder,l=t.value,u=p()("Input","field",{reactCollaboratorInviterTypeaheadCustom:a},{collaboratorInviterTypeahead:!a}),f=r?{board:r}:null;return d.a.createElement(B.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:f,value:l},d.a.createElement("div",{className:p()(o,"reactSocialTypeahead")},d.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},d.a.createElement(v.a,{className:u,id:"collaboratorInviterTypeahead",onChange:function e(t){i(t),n.logTypeaheadInput(t)},onKeyDown:c,placeholder:s?m.a._("Name or email","search"):null,value:l,focused:!0})),this.renderResultItems()))}}]),o}(r.Component);te(re,"defaultProps",{changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0});var oe=function e(t){var n;return{viewer:t.viewer}},ae=t.a=Object(o.connect)(oe)(re)},"z/23":function(e,t,n){"use strict";t.a=c;var s=n("d6ZO"),r=n.n(s),o=n("GGB8"),l=n.n(o),u=n("W/Cr"),a=n("IaRT"),i=n.n(a),f=n("5tOk");function c(e){var t=e.email,n=e.isValid,r=e.onClick,o=e.showSendEmailText,a=n?s.createElement("div",{className:"icon"},t[0].toUpperCase()):s.createElement("div",{className:l()("icon","typingEmail")},s.createElement("em",null)),i=n?u.a._("Click to send!"):u.a._("Keep typing!"),c=o?Object(f.h)(u.a._("Email {{ email }}"),{email:t}):Object(f.h)(u.a._("Invite {{ email }}"),{email:t});return s.createElement("div",{className:l()("sendToEmail",{unclickable:!n})},s.createElement("a",{className:"selectableEmailItem",onClick:function e(){n&&r()},role:"button"},s.createElement("div",{className:"left"},a),s.createElement("div",{className:"right"},s.createElement("h4",{className:"title"},c),s.createElement("p",{className:"subtitle"},i))))}}});