webpackJsonp([26],{"0daO":function(e,t){var n,r=Object.prototype.hasOwnProperty;function o(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}e.exports=o},"2/sl":function(e,t,n){var r=n("jMeh");function o(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}e.exports=o},"28Da":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return a});var a=function e(t){var n=t.result;r(this,e),o(this,"name","BoardPickerUserNavStopTraceEvent"),this.result=n}},"2azc":function(e,t,n){var m=n("/ilD"),y=n("dCRJ"),v=n("8dmk"),g=n("mumF"),E=n("tsKt"),_=n("ZnfX"),w=n("HHxI"),S=n("PlH4"),O=n("X2Hw"),j=n("I3tR"),I=n("Lujh"),C=n("uf3E"),x=n("0daO"),k=n("mSW6"),P=n("hGAs"),D=n("/BQV"),T=n("12WW"),R=n("SxeR"),B=n("k5jk"),M=1,A=2,L=4,N="[object Arguments]",r="[object Array]",o="[object Boolean]",a="[object Date]",i="[object Error]",F="[object Function]",H="[object GeneratorFunction]",c="[object Map]",l="[object Number]",U="[object Object]",s="[object RegExp]",u="[object Set]",d="[object String]",f="[object Symbol]",p="[object WeakMap]",b="[object ArrayBuffer]",h="[object DataView]",Q="[object Float32Array]",W="[object Float64Array]",Y="[object Int8Array]",z="[object Int16Array]",G="[object Int32Array]",V="[object Uint8Array]",K="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]",J={};function q(n,r,o,e,t,a){var i,c=r&M,l=r&A,s=r&L;if(o&&(i=t?o(n,e,t,a):o(n)),void 0!==i)return i;if(!R(n))return n;var u=D(n);if(u){if(i=x(n),!c)return w(n,i)}else{var d=C(n),f=d==F||d==H;if(T(n))return _(n,c);if(d==U||d==N||f&&!t){if(i=l||f?{}:P(n),!c)return l?O(n,E(i,n)):S(n,g(i,n))}else{if(!J[d])return t?n:{};i=k(n,d,q,c)}}a||(a=new m);var p=a.get(n);if(p)return p;a.set(n,i);var b=s?l?I:j:l?keysIn:B,h=u?void 0:b(n);return y(h||n,function(e,t){h&&(e=n[t=e]),v(i,t,q(e,r,o,t,n,a))}),i}J[N]=J[r]=J[b]=J[h]=J[o]=J[a]=J[Q]=J[W]=J[Y]=J[z]=J[G]=J[c]=J[l]=J[U]=J[s]=J[u]=J[d]=J[f]=J[V]=J[K]=J[X]=J[Z]=!0,J[i]=J[F]=J[p]=!1,e.exports=q},"3ZhG":function(e,t,n){"use strict";t.a=i;var r=n("d6ZO"),o=n.n(r),a=n("gEaE");function i(e){var t=e.htmlFor,n=e.errorMessage;return r.createElement(a.q,{htmlFor:t},r.createElement(a.b,{marginTop:1},r.createElement(a.K,{color:"orange",size:"sm"},n)))}},"8N7E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PinRepEditButton",function(){return l});var o=n("d6ZO"),r=n.n(o),a=n("W/Cr"),i=n("mu3h"),c=n("gEaE"),l=function e(t){var r=t.handlePinEditButtonClick,n=t.style;return o.createElement(c.o,{accessibilityLabel:a.a._("Edit","edit button on pin"),bgColor:n&&n.bgColor||"white",icon:"edit",iconColor:n&&n.iconColor||"darkGray",onClick:function e(t){var n=t.event;r(n)},size:n&&n.size||"md"})};t.default=Object(i.a)(l)},"9FFf":function(e,t,n){var r=n("2azc"),o=1,a=4;function i(e){return r(e,5)}e.exports=i},"9bGG":function(e,t,n){"use strict";t.a=S;var r=n("d6ZO"),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=32,m=100,y=null,v=!1,g=[],E=function e(){y&&clearTimeout(y),v=!0,y=setTimeout(function(){v=!1},m)},_=function e(t){0===g.length&&window.addEventListener("scroll",E),g.push(t)},w=function e(t){var n=g.indexOf(t);g.splice(n,1),0===g.length&&window.removeEventListener("scroll",E)};function S(t){return function(e){function a(){var e,t;i(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return b(p(p(t=s(this,(e=u(a)).call.apply(e,[this].concat(r))))),"state",{isHovering:!1}),b(p(p(t)),"handlers",{onMouseOver:function e(){return t._setHover(!0)},onMouseLeave:function e(){return t._setHover(!1)}}),t}return d(a,e),l(a,[{key:"componentDidMount",value:function e(){_(this)}},{key:"componentWillUnmount",value:function e(){this.hoverTimer&&clearTimeout(this.hoverTimer),w(this)}},{key:"_setHover",value:function e(t){var n=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=t&&v?setTimeout(function(){return n._setHover(t)},m):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},h)}},{key:"render",value:function e(){return r.createElement(t,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),a}(r.Component)}},A9N4:function(e,t,n){var o=n("CV5O"),a=n("/BQV");function r(e,t,n){var r=t(e);return a(e)?r:o(r,n(e))}e.exports=r},CV5O:function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},DKBQ:function(e,t,n){"use strict";t.a=o;var r=n("S+Qs");function o(t,n){return function(e){return e(Object(r.a)("BoardSectionResource",{field_set_key:n||"board_page",section_id:t}))}}},HEYN:function(e,t,n){"use strict";t.b=h,t.a=o;var l=n("VF/E"),s=n("Jw9X"),u=n("NmQ5"),r=n("THYI"),d=n.n(r),f=n("g5tP"),p=n("mZ/m"),b=n("S+Qs");function h(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function o(e){var i=e.boardId,t=e.name,n=e.nameSource,c=e.pinImport,r=0;"RECOMMENDATION"===n?r=1:"EDITED_RECOMMENDATION"===n&&(r=2);var o={board_id:i,initial_pins:c&&!c.all?c.pinIds:[],name:t,name_source:r};return function(a){return d.a.create("BoardSectionResource",o).callCreate({showError:!1}).then(function(e){var n=e.resource_response.data;a(h(i,n)),a(Object(s.a)({feedId:i,feedType:p.b.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),a(Object(f.b)(i,"pin_count")),a(Object(b.f)("BoardSectionsRepinResource",{board_id:i}));var t=c||{all:!1,pinIds:[]},r=t.all,o=t.pinIds;return r?new Promise(function(e,t){return a(Object(u.a)({inverseSelection:!0,selectedPinIds:o,source:{boardId:i,sectionId:null},target:{boardId:i,sectionId:n.id}})).then(function(){return e(n)}).catch(t)}):(0<o.length&&a(Object(l.a)(p.b.BOARD_PINS,i)),n)})}}},HLDn:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var o=n("B0A7"),a=n("VF/E"),i=n("S+Qs"),c=["alphabetical","last_pinned_to","oldest","newest","custom"],r=25,l={name:"BoardsResource",key:"boardsResource",options:function e(t){var n=t.boardOrder,r=t.mixPublicSecret,o;return{privacy_filter:"all",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:t.username,page_size:25,group_by:r?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0}}},s=function e(t,n,r){return{privacy_filter:n?"secret":"public",sort:r||"last_pinned_to",field_set_key:"profile_grid_item",username:t}},u=function e(r){return c.reduce(function(e,t){var n=[Object(a.a)("profileBoards",Object(o.c)(r,t))];return[!0,!1].forEach(function(e){n.push(Object(i.f)(l.name,l.options({username:r,boardOrder:t,mixPublicSecret:e})))}),e.concat(n)},[])}},I3tR:function(e,t,n){var r=n("A9N4"),o=n("Z+2v"),a=n("k5jk");function i(e){return r(e,a,o)}e.exports=i},Jw9X:function(e,t,n){"use strict";function r(e){return{type:"FEED_ITEMS_ADDED",payload:e}}t.a=r},Lujh:function(e,t,n){var r=n("A9N4"),o=n("YeXd"),a=n("dY7Z");function i(e){return r(e,a,o)}e.exports=i},NCQM:function(e,t,n){"use strict";var r=n("d6ZO"),s=n.n(r),o=n("DUIN"),a=n("iSgY"),u=n("lip+"),i=n("BAXv"),c=n("uIsx"),d=n("W/Cr"),f=n("Y5gj"),l=n("JyNp"),p=n("n9Oa"),b=n("vJNz"),h=n("Qqx1"),m=n("gEaE"),y=n("MQ2h"),v=n.n(y);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){k(t,e,n[e])})}return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?x(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=e.board,n=e.hovered,r=e.searchQuery,o=t.privacy===i.a.BoardPrivacy.SECRET;return s.a.createElement(m.b,{color:n?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},s.a.createElement(m.b,{flex:"grow"},s.a.createElement(m.K,{bold:!0},Object(b.b)(r,t.name))),s.a.createElement(m.b,{display:"flex",flex:"none",direction:"row"},o&&s.a.createElement(a.a,{type:"secret"}),t.is_collaborative&&s.a.createElement(a.a,{type:"group"})))}var D=function(e){function n(e,t){var o;return _(this,n),k(x(x(o=O(this,j(n).call(this,e,t)))),"getSections",function(){var e=o.state.searchQuery,t=o.props.boardResource.data.all_boards;return e.length>=h.a?[{items:Object(p.a)(t,e)}]:[{items:t}]}),k(x(x(o)),"createBtnDisabled",function(){var e=o.props.boardResource.data.all_boards,t=o.state.searchQuery;return e.some(function(e){return e.name.toLowerCase()===t.toLowerCase()})}),k(x(x(o)),"handleBoardCreate",function(r){return function(){var e=o.state.searchQuery;if(e){var t=o.props.onBoardCreate,n;if(t)t(e);else(0,o.props.dispatch)(Object(c.a)(e,r)).then(function(e){var t;(0,o.props.onBoardChosen)(e)})}}}),k(x(x(o)),"handleBoardSelected",function(e){o.props.onBoardChosen(e),o.setState({selectedBoard:e})}),k(x(x(o)),"handleSearchQueryUpdate",function(e){o.setState({searchQuery:e})}),k(x(x(o)),"renderRow",function(e){var t=e.item,n=e.hovered,r=o.state.searchQuery;return s.a.createElement(P,{board:t,hovered:n,searchQuery:r})}),o.state={searchQuery:"",selectedBoard:e.board},o}return I(n,e),S(n,[{key:"render",value:function e(){var t=this,n=this.props,r=n.boardResource,o=n.board,a=this.state,i=a.searchQuery,c=a.selectedBoard,l=d.a._("Select a board","Label for selecting a board in Edit Pin Modal");return o?l=o.name:c&&(l=c.name),s.a.createElement(m.b,null,s.a.createElement(m.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!r.isLoaded}),r.data&&s.a.createElement(u.a,null,function(e){return s.a.createElement(f.a,{dropdownValue:l,onCreate:t.handleBoardCreate(e),onSearchQueryUpdate:t.handleSearchQueryUpdate,onSelect:t.handleBoardSelected,renderRow:t.renderRow,searchQuery:i,sections:t.getSections(),createBtnDisabled:t.createBtnDisabled()})}))}}]),n}(r.Component);function T(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}t.a=Object(y.compose)(Object(o.connect)(T),Object(l.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(t){return E({pin_id:t.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:t.username},t.advertiser_id&&t.username?{advertiser_id:t.advertiser_id,filter:"protected",username:t.username}:{})}},{allowStale:!1}))(D)},NmQ5:function(e,t,n){"use strict";t.b=s,t.a=u;var o=n("DKBQ"),r=n("VF/E"),f=n("Jw9X"),p=n("pOmq"),a=n("THYI"),b=n.n(a),i=n("g5tP"),h=n("mZ/m"),m=n("ar0l"),y=function e(t){return Object(r.a)(t.sectionId?h.b.SECTION_PINS:h.b.BOARD_PINS,t.sectionId||t.boardId)};function c(e,r){var t=e.inverseSelection,o=e.selectedPinIds,n=e.source,a=e.target;if(n.boardId===a.boardId&&(n.sectionId||null)===(a.sectionId||null))return Promise.reject();if(t){var i={board_id:n.boardId,new_board_id:a.boardId,old_section_id:n.sectionId||void 0,new_section_id:a.sectionId||void 0,pin_ids:o};return b.a.create("BulkEditSelectAllResource",i).callUpdate({showError:!1}).then(function(){return Promise.all([r(y(n)),r(y(a))])}).catch(m.a)}var c=function e(t,n){r(Object(p.a)({feedId:t.sectionId||t.boardId,feedType:t.sectionId?h.b.SECTION_PINS:h.b.BOARD_PINS,itemIds:o,itemType:"pin"})),r(Object(f.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?h.b.SECTION_PINS:h.b.BOARD_PINS,itemIds:o,itemType:"pin"}))};c(n,a);var l=function e(){return c(a,n)};if(a.boardId===n.boardId){if(a.sectionId){var s={section_id:a.sectionId,pins:o};return b.a.create("BoardSectionEditResource",s).callUpdate({showError:!1}).catch(function(e){l(),Object(m.a)(e)})}var u={section_id:n.sectionId,pins:o};return b.a.create("BoardSectionPinsResource",u).callDelete({showError:!1}).catch(function(e){l(),Object(m.a)(e)})}var d={board_id:a.boardId,section_id:a.sectionId||void 0,pin_ids:o};return b.a.create("BulkEditResource",d).callUpdate({showError:!1}).catch(function(e){l(),Object(m.a)(e)})}function l(e,t){var n=e.source,r=e.target;r.boardId!==n.boardId?(t(Object(i.b)(n.boardId,"pin_count")),t(Object(i.b)(r.boardId,"pin_count"))):n.sectionId&&r.sectionId||t(Object(i.b)(r.boardId,"pin_count")),n.sectionId&&t(Object(o.a)(n.sectionId)),r.sectionId&&t(Object(o.a)(r.sectionId))}function s(o){return function(e){var t=o.selectedPinIds,n=o.source,r=o.target;e(Object(p.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?h.b.SECTION_PINS:h.b.BOARD_PINS,itemIds:t,itemType:"pin"})),e(Object(f.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?h.b.SECTION_PINS:h.b.BOARD_PINS,itemIds:t,itemType:"pin"})),l(o,e)}}function u(t){return function(e){return c(t,e).then(function(){return l(t,e)})}}},Otfq:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var m=n("d6ZO"),r=n.n(m),o=n("RklN"),s=n.n(o),c=n("b11Z"),a=n("p58k"),y=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?v(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function r(e,t){var h;l(this,r),g(v(v(h=f(this,p(r).call(this,e,t)))),"setSelectedItemRef",function(e){h.selectedItemRef=e}),g(v(v(h)),"handleIndexUpdate",function(e){var t=h.props.indexManager;h.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),g(v(v(h)),"handleSelectItem",function(r){return function(){var e=h.props,t=e.disabled,n=e.onSelectItem;t||n(r)}}),g(v(v(h)),"handleMouseEnter",function(a){return function(e){var t=e.event,n=h.props,r=n.disabled,o=n.indexManager;r||o.updateIndex(a)}}),g(v(v(h)),"handleMouseLeave",function(e){var t=e.event,n=h.props,r=n.disabled,o=n.indexManager;r||o.setInactive()}),g(v(v(h)),"renderItems",function(e,a){var t=h.props.renderItem,n,r=h.state.selectedIndex||{},i=r.row,o=r.section,c=e.customProps,l=void 0===c?{}:c,s=e.items,u=e.renderItem,d=l.isDisabled,f=void 0===d?function(e){return!1}:d,p=a===o,b=u||t;return b&&s.map(function(e,t){var n=f(e),r={section:a,row:t},o=p&&t===i;return m.createElement("div",{"data-test-id":"board-selection",key:t,ref:!n&&o&&h.setSelectedItemRef},n?b({item:e,hovered:o,sectionProps:l}):m.createElement(y.O,{onMouseEnter:h.handleMouseEnter(r),onMouseLeave:h.handleMouseLeave,onTouch:h.handleSelectItem(e),fullWidth:!1,shape:"rounded"},b({item:e,hovered:o,sectionProps:l})))})}),g(v(v(h)),"renderSections",function(){var e=h.props,n=e.renderSectionHeader,t;return e.sections.map(function(e,t){return m.createElement(y.b,{key:t},n&&n(e,t),h.renderItems(e,t))})});var n=h.props.indexManager;return h.state={selectedIndex:n.getIndex(),selectionMovedByKeyboard:!1},n.setUpdateCallback(h.handleIndexUpdate),h}return b(r,e),d(r,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n;this.props.indexManager!==t.indexManager&&t.indexManager.setUpdateCallback(this.handleIndexUpdate)}},{key:"componentDidUpdate",value:function e(){var t=this.containerRef;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){var n=s.a.findDOMNode(this.selectedItemRef);if(!(n instanceof HTMLElement))return;var r=n.getBoundingClientRect(),o=r.top,a=r.bottom,i=t.getBoundingClientRect(),c=i.top,l;i.bottom<=a?n.scrollIntoView(!1):o<=c&&n.scrollIntoView(!0)}}},{key:"render",value:function e(){var r=this,t=this.props,n=t.grow,o=void 0!==n&&n,a=t.maxHeight,i=t.fetchMore;return m.createElement(c.a,{fetchMore:i},function(e){var n=e.setRef,t=e.onScroll;return m.createElement(y.b,{flex:o?"grow":void 0,height:o?"100%":void 0,maxHeight:a,onScroll:t,overflow:"auto",ref:function e(t){r.containerRef=t,n(t)}},r.renderSections())})}}]),r}(m.Component)},PlH4:function(e,t,n){var r=n("heHu"),o=n("Z+2v");function a(e,t){return r(e,o(e),t)}e.exports=a},Qqx1:function(e,t,n){"use strict";var s=n("d6ZO"),m=n.n(s),y=n("vJNz"),r=n("28Da"),d=n("aC/n"),f=n("W/Cr"),o=n("9bGG"),p=n("gEaE");function a(e){var t=e.buttonLabel,n=e.isHovering,r=e.isRowItem,o=e.hasHoverState,a=e.hoverHandlers,i=e.name,c=e.onClick,l=i||t||f.a._("Create board");return s.createElement(p.O,{onMouseEnter:a.onMouseOver,onMouseLeave:a.onMouseLeave,onTouch:c},s.createElement(p.b,{alignItems:"center",color:o&&n?"lightGray":"white",display:"flex",flex:r?"shrink":"none",height:64,width:"100%"},s.createElement(p.b,{marginLeft:6,marginRight:3,"data-test-id":"createBoardButton"},s.createElement(p.n,{accessibilityLabel:f.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),i?s.createElement(p.b,{margin:1},s.createElement(p.K,{inline:!0,overflow:"normal",__dangerouslyIncreaseLineHeight:!0}," ",f.a._("Create: ")," ")):null,s.createElement(p.K,{truncate:!0,align:"center",bold:!0,inline:!0,__dangerouslyIncreaseLineHeight:!0}," ",l," ")))}var b=Object(o.a)(a),h=n("p58k"),v=n("W0l8"),i=n("MSpZ"),g=n("Otfq");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function _(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?j(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return x});var C="",x=2,k=function(e){function o(){var e,h;l(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return I(j(j(h=_(this,(e=w(o)).call.apply(e,[this].concat(n))))),"state",{searchQuery:""}),I(j(j(h)),"handleSelectItem",function(e){var t=h.props,n=t.onCreate,r=t.onSelected,o;!e&&n?n(h.state.searchQuery):e&&r(e);(n||e)&&h.setState({searchQuery:""})}),I(j(j(h)),"handleSearchQueryInput",function(e){h.setState({searchQuery:e})}),I(j(j(h)),"renderSectionHeader",function(e,t){return e.title?m.a.createElement(p.b,null,0<t&&m.a.createElement(p.j,null),m.a.createElement(p.b,{deprecatedPadding:{x:3,y:1}},m.a.createElement(p.K,{size:"sm"},e.title))):null}),I(j(j(h)),"renderRow",function(e){var t=e.item,n=e.hovered,r=e.sectionProps,o=void 0===r?{}:r,a=h.props,i=a.boardSavedTo,c=a.isSelectMode,l=a.disabledRowId,s=h.state.searchQuery,u=o.inSectionSelection,d=void 0!==u&&u,f,p=i&&i.board===t.id?i&&i.state:null,b="board_section"===t.type;return m.a.createElement(y.a,{isSelectMode:c,disabled:t.id===l&&d,item:t,isSection:b,isWithinSectionPicker:d,saveState:p,searchQuery:s,selected:n})}),h}return S(o,e),E(o,[{key:"componentDidUpdate",value:function e(t){!t.isLoaded&&this.props.isLoaded&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function e(){var t=this.props.hasLoadError?3:1;i.a.sendEvent(new r.a({result:t}))}},{key:"render",value:function e(){var t=this.props,n=t.boardSavedTo,r=t.createButtonLabel,o=t.hasLowBoardCount,a=t.getSections,i=t.isLoaded,c=t.onCreate,l=t.pinId;if(i){var s=this.state.searchQuery,u=a(s);return this.indexManager=new h.a(u.map(function(e){return e.items})),this.indexManager.setSelectItem(this.handleSelectItem),m.a.createElement(p.b,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!o&&m.a.createElement(p.b,null,m.a.createElement(p.b,{paddingX:6,marginBottom:4,marginTop:1},m.a.createElement(v.a,{disabled:!!n,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:s})),m.a.createElement(p.j,null)),m.a.createElement(g.a,{disabled:!!n,grow:!o&&!s,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:u}),m.a.createElement(p.j,null),c&&m.a.createElement(b,{buttonLabel:r,hasHoverState:!0,name:s,onClick:function e(){return c(s)}}),o&&l&&m.a.createElement(d.a,{onBoardSelected:c,pinId:l}))}return m.a.createElement(p.b,{deprecatedPadding:{y:5}},m.a.createElement(p.G,{accessibilityLabel:f.a._("loading section picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}]),o}(s.Component),P=t.b=k},ULpJ:function(e,t,n){var r=n("kEQe"),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;function i(e){return a?Object(a.call(e)):{}}e.exports=i},"VF/E":function(e,t,n){"use strict";function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}t.a=r},W0l8:function(e,t,n){"use strict";var r=n("d6ZO"),i=n.n(r),o=n("RklN"),c=n.n(o),l=n("BAXv"),s=n("W/Cr"),a=n("p58k"),u=n("gEaE");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function a(){var e,o;f(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(g(o=h(this,(e=m(a)).call.apply(e,[this].concat(n))))),"handleKeyDown",function(e){var t=o.props,n=t.disabled,r=t.indexManager;if(!n)switch(e.which){case l.a.KeyCode.ENTER:case l.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),r.select();break;case l.a.KeyCode.UP:e.preventDefault(),r.prev();break;case l.a.KeyCode.DOWN:e.preventDefault(),r.next()}}),o}return y(a,e),b(a,[{key:"componentDidMount",value:function e(){var t=this._input;if(t){var n=c.a.findDOMNode(t);if(n instanceof HTMLElement){var r=n.querySelector("input");r&&r.focus()}}}},{key:"render",value:function e(){var n=this,t=this.props,r=t.onChange,o=t.value;return i.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},i.a.createElement(u.D,{accessibilityLabel:"",id:"pickerSearchField",onChange:function e(t){var n=t.value;return r(n)},placeholder:s.a._("Search","search bar placeholder text"),ref:function e(t){n._input=t},value:o}))}}]),a}(r.Component);t.a=_},W9T9:function(e,t,n){"use strict";t.a=o;var i=n("d6ZO"),r=n.n(i),c=n("W/Cr"),l=n("gEaE");function o(e){var t=e.commentsDisabled,n=e.onCommentChange,r=e.onPhotoChange,o=e.photosDisabled,a=e.isManagedView;return i.createElement(l.b,null,i.createElement(l.j,null),i.createElement(l.b,{md:{display:"flex"},justifyContent:"between",paddingX:a?0:4,paddingY:a?6:3},!a&&i.createElement(l.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(l.K,{size:"sm"},c.a._("Comment and Photo Permissions"))),i.createElement(l.b,{xs:{column:12},md:{column:a?12:8}},i.createElement(l.b,{paddingY:1,display:"flex",alignItems:"center"},i.createElement(l.I,{onChange:n,id:"CommentSwitch",switched:!t}),i.createElement(l.b,{paddingX:2},i.createElement(l.q,{htmlFor:"CommentSwitch"},i.createElement(l.K,{size:"sm"},c.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form"))))),i.createElement(l.b,{paddingY:1,alignItems:"center",display:"flex"},i.createElement(l.I,{onChange:r,id:"PhotoSwitch",switched:!o}),i.createElement(l.b,{paddingX:2},i.createElement(l.q,{htmlFor:"PhotoSwitch"},i.createElement(l.K,{size:"sm"},c.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form"))))))))}},WoY6:function(e,t){function n(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}e.exports=n},X2Hw:function(e,t,n){var r=n("heHu"),o=n("YeXd");function a(e,t){return r(e,o(e),t)}e.exports=a},Y5gj:function(e,t,n){"use strict";var m=n("d6ZO"),r=n.n(m),y=n("W/Cr"),v=n("p58k"),g=n("W0l8"),o=n("9bGG"),E=n("Otfq"),_=n("gEaE");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function a(){var e,o;i(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(p(p(o=s(this,(e=u(a)).call.apply(e,[this].concat(n))))),"state",{showFlyout:!1}),b(p(p(o)),"setContainerRef",function(e){o.containerRef=e}),b(p(p(o)),"handleCreate",function(){o.hideFlyout();var e=o.props.onCreate;e&&e()}),b(p(p(o)),"handleSelectItem",function(e){o.hideFlyout();var t=o.props,n=t.onSelect,r=t.onCreate;e?n(e):r&&r()}),b(p(p(o)),"handleDropdownTouch",function(){o.setState(function(e){return{showFlyout:!e.showFlyout}})}),b(p(p(o)),"handleHideFlyout",function(e){o.containerRef&&e.target instanceof HTMLElement&&!o.containerRef.contains(e.target)&&o.hideFlyout()}),b(p(p(o)),"hideFlyout",function(){var e;(0,o.props.hoverHandlers.onMouseLeave)(),o.setState({showFlyout:!1})}),o}return d(a,e),l(a,[{key:"componentDidMount",value:function e(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}},{key:"render",value:function e(){var t=this.props,n=t.dropdownValue,r=t.fetchMore,o=t.hoverHandlers,a=o.onMouseOver,i=o.onMouseLeave,c=t.isHovering,l=t.onCreate,s=t.onSearchQueryUpdate,u=t.renderRow,d=t.searchQuery,f=t.sections,p=t.createBtnDisabled,b=this.state.showFlyout;this.indexManager=new v.a(f.map(function(e){return e.items})),this.indexManager.setSelectItem(this.handleSelectItem);var h=!d.trim()||!!p;return m.createElement("div",{ref:this.setContainerRef},m.createElement(_.O,{onMouseEnter:a,onMouseLeave:i,onTouch:this.handleDropdownTouch,fullWidth:!1,shape:"rounded"},m.createElement(_.b,{alignItems:"center",color:c?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,shape:"rounded"},m.createElement(_.b,{display:"flex",flex:"grow"},m.createElement(_.K,{bold:!0},n)),m.createElement(_.n,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),b&&m.createElement(_.b,{position:"relative"},m.createElement(_.b,{shape:"rounded",color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",dangerouslySetInlineStyle:{__style:{border:"1px solid #efefef",zIndex:1}}},m.createElement(_.b,null,m.createElement(_.b,{display:"flex",padding:2,marginLeft:-1,marginRight:-1},m.createElement(_.b,{display:"flex",flex:"grow",paddingX:1},m.createElement(g.a,{hideIcon:!0,indexManager:this.indexManager,onChange:s,value:d})),l&&m.createElement(_.b,{paddingX:1},m.createElement(_.c,{disabled:h,inline:!0,onClick:this.handleCreate,text:y.a._("Create","board or section dropdown create button")})))),m.createElement(E.a,{fetchMore:r,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:u,sections:f}))))}}]),a}(m.Component);t.a=Object(o.a)(h)},YeXd:function(e,t,n){var r=n("CV5O"),o=n("W2vJ"),a=n("Z+2v"),i=n("rJ1s"),c,l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=l},"Z+2v":function(e,t,n){var r=n("aQ1v"),o=n("rJ1s"),a=Object.getOwnPropertySymbols,i=a?r(a,Object):o;e.exports=i},"aC/n":function(e,t,n){"use strict";var r=n("d6ZO"),c=n.n(r),o=n("28Da"),s=n("gEaE");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?h(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function a(){var e,t;i(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(h(h(t=d(this,(e=f(a)).call.apply(e,[this].concat(r))))),"state",{isHovering:!1}),m(h(h(t)),"onHover",function(){t.setState({isHovering:!0})}),m(h(h(t)),"offHover",function(){t.setState({isHovering:!1})}),t}return p(a,e),u(a,[{key:"render",value:function e(){var t=this.props,n=t.name,r=t.selected,o=t.image,a;return t.inFlyoutExp?c.a.createElement(s.b,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},c.a.createElement(s.b,null,c.a.createElement(s.u,{height:40,width:40,shape:"rounded"},this.state.isHovering&&o?c.a.createElement(s.p,{alt:"",color:"",fit:"cover",naturalHeight:o.height,naturalWidth:o.width,src:o.url}):c.a.createElement(s.b,{color:"lightGray",height:40,width:40}))),c.a.createElement(s.b,{padding:2},c.a.createElement(s.K,{bold:!0,size:"xl"},n))):c.a.createElement(s.b,{alignItems:"center",color:r?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},c.a.createElement(s.b,null,c.a.createElement(s.n,{color:r?"darkGray":"gray",icon:"add",accessibilityLabel:""})),c.a.createElement(s.b,{marginLeft:3},c.a.createElement(s.K,{color:r?"darkGray":"gray",bold:!0,size:"lg"},n)))}}]),a}(r.Component),v=n("W/Cr"),g=n("MSpZ"),E=n("pN+K"),_=n("MQ2h"),w=n.n(_),S=n("y2lE");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function x(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?T(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=-1,M=function(e){function t(e){var l;return j(this,t),R(T(T(l=x(this,k(t).call(this,e)))),"_processSuggestions",function(e){return e&&e.length?e.map(function(e){return e.title}):[]}),R(T(T(l)),"handleClick",function(e){var t=l.state,n=t.selectedIndex,r=t.suggestedBoardsNames,o=l.props,a=o.contextLog,i=o.onBoardSelected,c=o.oneTapFlyout;i(r[n],c||!1),a(101,{component:13025,element:23})}),R(T(T(l)),"handleMouseEnter",function(e){l.setState({selectedIndex:e})}),R(T(T(l)),"handleMouseLeave",function(){l.setState({selectedIndex:-1})}),R(T(T(l)),"renderSuggestionRow",function(e,t){var n=l.state.selectedIndex===t;return c.a.createElement("li",{key:t},c.a.createElement(s.O,{onTouch:function e(){return l.handleClick(t)},onMouseEnter:function e(){return l.handleMouseEnter(t)},onMouseLeave:l.handleMouseLeave},c.a.createElement(y,{selected:n,name:e,inFlyoutExp:l.props.inFlyoutExp,image:l.props.image})))}),l.state={selectedIndex:-1,suggestedBoardsNames:l._processSuggestions(e.boards)},l}return P(t,e),C(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({suggestedBoardsNames:this._processSuggestions(t.boards)})}},{key:"componentDidUpdate",value:function e(t){!t.resourceLoaded&&this.props.resourceLoaded&&this.props.inFirstBoardCreateGestaltExp&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function e(){var t=this.props.error?3:1;g.a.sendEvent(new o.a({result:t}))}},{key:"renderGestaltBoardSuggestionList",value:function e(){var t=v.a._("Suggested board names","text above suggested board names list");return c.a.createElement(s.b,null,c.a.createElement(s.b,{marginTop:5,marginLeft:6,marginBottom:3},c.a.createElement(s.K,{size:"md"},v.a._("Suggested board names"))),c.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}},{key:"renderPreviewBoardSuggestionList",value:function e(){return c.a.createElement("div",null,c.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}},{key:"render",value:function e(){var t=this.props,n=t.inFirstBoardCreateGestaltExp,r=t.inFlyoutExp,o=t.minHeight,a;if(!t.resourceLoaded)return c.a.createElement(s.b,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:o||""},c.a.createElement(s.G,{accessibilityLabel:v.a._("Loading board suggestions","Accesibility label for loading board suggestions"),show:!0}));var i=this.state.suggestedBoardsNames;return i&&i.length?r?this.renderPreviewBoardSuggestionList():n?this.renderGestaltBoardSuggestionList():c.a.createElement(s.b,null,c.a.createElement(s.b,{marginTop:2,paddingX:5},c.a.createElement(s.K,null,v.a._("Suggested board names"))),c.a.createElement("ul",null,i.map(this.renderSuggestionRow))):null}}]),t}(r.Component),A=t.a=Object(_.compose)(Object(E.b)({name:"BoardTitleSuggestionsResource",options:function e(t){var n;return{pin_id:t.pinId}},key:"boards"}),S.a)(M)},ar0l:function(e,t,n){"use strict";t.a=s;var r=n("BVzu"),o=n("W/Cr"),a=2171,i=2172,c=2173;function l(e){switch(e.api_error_code){case a:case i:case c:return o.a._("Please wait until the previous board action finishes.");default:return e.message}}function s(e){r.default.showError(l(e))}},b11Z:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("d6ZO"),o=n.n(r),a=n("WBZ1"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=200,v=function e(t,n){var r=t.scrollTop,o=t.clientHeight,a,i,c;return t.scrollHeight<r+o+(n?n(o):2*o)},g=function(e){function a(){var e,r;l(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return m(h(h(r=d(this,(e=f(a)).call.apply(e,[this].concat(n))))),"setContainerRef",function(e){r.containerRef=e}),m(h(h(r)),"fetchMoreIfNecessary",i()(function(){var e=r.props,t=e.fetchMore,n=e.scrollBuffer;t&&r.containerRef&&v(r.containerRef,n)&&t()},y)),r}return p(a,e),u(a,[{key:"componentDidMount",value:function e(){setTimeout(this.fetchMoreIfNecessary)}},{key:"componentDidUpdate",value:function e(){this.fetchMoreIfNecessary()}},{key:"render",value:function e(){var t;return(0,this.props.children)({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}]),a}(o.a.PureComponent)},dCRJ:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},g5tP:function(e,t,n){"use strict";t.h=y,t.i=v,t.b=g,t.j=_,t.f=w,t.e=S,t.m=O,t.d=j,t.g=C,t.c=x,t.a=P,t.l=T,t.k=R;var i=n("/e0Y"),r=n("VF/E"),o=n("THYI"),c=n.n(o),a=n("mZ/m"),l=n("Cjb7"),s=n("HLDn"),u=n("D+PP"),d=n("S+Qs");function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){p(t,e,n[e])})}return t}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b="board_create",h="board_delete",m="board_edit";function y(){return{type:"BOARDS_FETCH_ALL_IF_NEEDED",payload:{}}}function v(){return{type:"BOARDS_FETCH_LAST_PINNED_TO_IF_NEEDED",payload:{}}}function g(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function E(){var e,t,n;return{type:"BOARD_CREATE_COMPLETE",payload:{options:0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},board:1<arguments.length?arguments[1]:void 0},error:2<arguments.length?arguments[2]:void 0}}function _(){return function(t,e){var n,r=e().viewer;r.isAuth&&Object(s.b)(r.username).forEach(function(e){t(e)})}}function w(e){var r=f({},e);return function(n){return n({type:"BOARD_CREATE",payload:{board:e}}),c.a.create("BoardResource",r).callCreate().then(function(e){i.a.trackEvent(b,"success");var t=e.resource_response.data;return t&&(l.b.publish("currentUser","boardCreated",t),n(_()),n(E(r,t))),t}).catch(function(e){throw i.a.trackEvent(b,"error"),e})}}function S(){var e,t,n;return{type:"BOARD_UPDATE_COMPLETE",payload:{options:0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},board:1<arguments.length?arguments[1]:void 0},error:2<arguments.length?arguments[2]:void 0}}function O(r){return function(t){var n=f({board_id:r.id,name:r.name,description:r.description,category:r.category,privacy:r.privacy,collab_board_email:r.collab_board_email,collaborator_invites_enabled:r.collaborator_invites_enabled},r.collaborator_requests_enabled?{collaborator_requests_enabled:r.collaborator_requests_enabled}:{});return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:n}}),c.a.create("BoardResource",n).callUpdate().then(function(e){i.a.trackEvent(m,"success"),t(S(n,r))}).catch(function(e){throw i.a.trackEvent(m,"error"),e})}}function j(e,t){return{type:"BOARD_UPDATE_COLLABORATION_SETTINGS",payload:{boardId:e,collaboratorRequestsEnabled:t}}}function I(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function C(a){return function(e,t){var n=t().boards.content[a],r=n.pin_count,o=n.owner.id;return e({type:"BOARD_DELETE",payload:{boardId:a}}),c.a.create("BoardResource",{board_id:a}).callDelete().then(function(){i.a.trackEvent(h,"error"),l.b.publish("currentUser","boardDeleted",a),e(I(a)),e(Object(u.a)({userId:o,increment:-r}))}).catch(function(e){throw i.a.trackEvent(h,"error"),e})}}function x(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function k(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}function P(t){return function(e){return e(k(t)),c.a.create("BoardArchiveResource",{boardId:t}).callUpdate()}}function D(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}function T(t){return function(e){return e(D(t)),c.a.create("BoardArchiveResource",{boardId:t}).callDelete()}}function R(t,n){return function(e){return c.a.create("BoardsMergeResource",{source_board_id:t,target_board_id:n}).callUpdate().then(function(){return Promise.all([e(I(t)),e(g(n,"pin_count")),e(Object(r.a)(a.b.BOARD_SECTIONS,n))])})}}},gYE3:function(e,t){function n(e,t){return e.add(t),e}e.exports=n},hkVh:function(e,t,n){"use strict";t.a=d;var a=n("d6ZO"),r=n.n(a),i=n("gEaE");function c(e,t){if(null==e)return{};var n=l(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}var o={__style:{borderRadius:4}},s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function u(){return a.createElement(i.b,{alignItems:"center",color:"red",dangerouslySetInlineStyle:o,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},a.createElement(i.b,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}function d(e){var t=e.disabled,n=e.submitting,r=e.text,o=c(e,["disabled","submitting","text"]);return a.createElement(i.b,{display:"flex",position:"relative"},n&&a.createElement(u,null),a.createElement(i.c,Object.assign({},o,{inline:!0,color:"red",type:"submit",text:r,disabled:t||n})))}},iSgY:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("W/Cr"),i=n("gEaE");function c(e){var t,n={group:{accessibilityLabel:a.a._("group board","Board picker group board icon"),icon:"people"},secret:{accessibilityLabel:a.a._("secret board","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:a.a._("board with sections","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:a.a._("board with sections","Board picker board with sections icon"),icon:"arrow-down"}}[e.type];return r.createElement(i.b,{marginLeft:1},r.createElement(i.n,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:14}))}t.a=c},iUIQ:function(e,t,n){var o=n("gYE3"),a=n("WoY6"),i=n("o9Bl"),r=1;function c(e,t,n){var r=t?n(i(e),1):i(e);return a(r,o,new e.constructor)}e.exports=c},"lip+":function(e,t,n){"use strict";var r=n("DUIN"),o=function e(t){var n,r;return(0,t.children)(t.viewer)},a=function e(t){var n;return{viewer:t.viewer}};t.a=Object(r.connect)(a)(o)},"mM+c":function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},mSW6:function(e,t,n){var a=n("jMeh"),i=n("2/sl"),c=n("pS3G"),l=n("xWQP"),s=n("iUIQ"),u=n("ULpJ"),d=n("RLiI"),f="[object Boolean]",p="[object Date]",b="[object Map]",h="[object Number]",m="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",E="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",O="[object Int8Array]",j="[object Int16Array]",I="[object Int32Array]",C="[object Uint8Array]",x="[object Uint8ClampedArray]",k="[object Uint16Array]",P="[object Uint32Array]";function r(e,t,n,r){var o=e.constructor;switch(t){case E:return a(e);case f:case p:return new o(+e);case _:return i(e,r);case w:case S:case O:case j:case I:case C:case x:case k:case P:return d(e,r);case b:return c(e,r,n);case h:case v:return new o(e);case m:return l(e);case y:return s(e,r,n);case g:return u(e)}}e.exports=r},mu3h:function(e,t,n){"use strict";var r=n("d6ZO"),s=n.n(r),o=n("DUIN"),i=n("qZXM"),u=n("ymrh"),a=n("MQ2h"),c=n.n(a),d=n("gEaE"),f=n("myYc"),p=n("woYD");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){S(t,e,n[e])})}return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?w(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(l){return function(e){function a(){var e,o;h(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(w(w(o=v(this,(e=g(a)).call.apply(e,[this].concat(n))))),"state",{showEditModal:!1}),S(w(w(o)),"onHide",function(){o.setState({showEditModal:!1}),(o.props.onToggleModal||f.e)(!1)}),S(w(w(o)),"handlePinEditButtonClick",Object(i.a)(function(e){e&&e.stopPropagation();var t=o.props,n=t.component,r;(t.onToggleModal||f.e)(!0),Object(p.a)(101,b({element:3},n?{component:n}:{})),o.setState({showEditModal:!0})})),o}return E(a,e),y(a,[{key:"render",value:function e(){var t=this.props,n=t.pinId,r=t.onDelete,o=t.onSubmit,a=t.carouselSlotCurrentIndex,i=this.state.showEditModal,c=b({},this.props,{handlePinEditButtonClick:this.handlePinEditButtonClick});return s.a.createElement(d.i,null,s.a.createElement(l,c),i&&s.a.createElement(u.a,{carouselSlotCurrentIndex:a,onDelete:r,onHide:this.onHide,onSubmit:o,pinId:n}))}}]),a}(r.PureComponent)}var j=function e(t,n){var r=t.pins,o=n.pinId,a=n.carouselSlotCurrentIndex,i,c,l,s=((r&&o&&r[o]||{}).carousel_data||{}).index;return void 0!==a?{carouselSlotCurrentIndex:s||a||0}:{}};t.a=Object(a.compose)(Object(o.connect)(j),O)},mumF:function(e,t,n){var r=n("heHu"),o=n("k5jk");function a(e,t){return e&&r(t,o(t),e)}e.exports=a},n9Oa:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o={"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"s","":"u","":"u","":"u","":"u"},l=function e(t){if(!t)return"";for(var n="",r=0;r<t.length;r+=1)n+=o[t.charAt(r)]||t.charAt(r);return n},a=function e(t,n){for(var r=n.split(" "),o=t.split(" "),a=0,i=0;i<o.length;i+=1){var c;(l(o[i]).includes(r[a])||o[i].includes(r[a]))&&(a+=1)}return a===r.length},r=function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"name",o=n.toLowerCase();return t.filter(function(e){return a(e[r].toLowerCase(),o)})}},p58k:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",function(){return s});var i={row:0,section:0},c={row:-1,section:-1},l=function e(){},s=function(){function t(e){r(this,t),this.index=Object.assign({},i),this.sections=e,this.updateCallback=l,this.selectItem=l}return a(t,[{key:"getIndex",value:function e(){return this.index}},{key:"isAtStart",value:function e(){var t=this.index,n=t.row,r=t.section;return 0===n&&0===r}},{key:"isAtEnd",value:function e(){var t=this.index,n=t.row,r=t.section,o=this.sections[r]||[];return this.sections.length===r+1&&o.length===n+1}},{key:"next",value:function e(){if(!this.isAtEnd()){var t=this.index,n=t.row,r=t.section;n===c.row&&r===c.section?this.index=Object.assign({},i):this.sections[r].length>n+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}}},{key:"prev",value:function e(){if(!this.isAtStart()){var t=this.index,n=t.row,r=t.section;if(n===c.row&&r===c.section)this.index=Object.assign({},i);else if(0<n)this.index.row-=1;else{var o=this.index.section-1;this.index={section:o,row:this.sections[o].length-1}}this.updateCallback(!0)}}},{key:"select",value:function e(){var t=this.index,n=t.row,r=t.section;this.selectItem((this.sections[r]||[])[n])}},{key:"setInactive",value:function e(){this.index=Object.assign({},c),this.updateCallback()}},{key:"setSelectItem",value:function e(t){this.selectItem=t}},{key:"setUpdateCallback",value:function e(t){this.updateCallback=t}},{key:"updateIndex",value:function e(t){this.index=t,this.updateCallback()}}]),t}()},"pN+K":function(e,t,n){"use strict";t.a=k,t.c=M;var u=n("d6ZO"),r=n.n(u),o=n("DUIN"),a=n("lJK6"),h=n("FfPm"),i=n("IaRT"),c=n.n(i),l=n("S+Qs");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(null==e)return{};var n=f(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function p(e){return y(e)||m(e)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function y(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){C(t,e,n[e])})}return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function w(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?I(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)};function k(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}var P=function e(t){var b={};return function(c){return function(e,s){var t=e.resources,r=t.fetching,u=t.data,n=c.some(function(e){var t=e.name,n=e.options;return r[t]&&r[t][k(n,s)]}),d={},f,p=[];c.forEach(function(e){var t=e.name,n=e.options,r=e.key;if(u[t]){var o=k(n,s);if(b[t]||(o in u[t]?h.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"success",v:1}):Object.keys(u[t]).length?h.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"error",v:1}):h.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"warn",v:1})),b[t]=!0,u[t][o]){var a=u[t][o],i=a.data,c=a.nextBookmark,l=a.error;d[r]=i,p.push(c),l&&(f=l)}}else h.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var o=c.every(function(e){var t=e.key;return void 0!==d[t]}),a,i;return{resourceLoaded:o,isAtEnd:o&&!n&&p.every(function(e){return"-end-"===e}),isFetching:n,nextBookmark:p[0],resourceData:d,error:f}}}},D=function e(i){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(s){var e,t;return t=e=function(e){function a(){var e,t;g(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return C(I(I(t=w(this,(e=S(a)).call.apply(e,[this].concat(r))))),"loadData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(l.a)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),C(I(I(t)),"loadMoreData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(l.d)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),C(I(I(t)),"resourcesHash",JSON.stringify(i.map(function(e){return v({},e,{options:k(e.options,t.props)})}))),t}return O(a,e),_(a,[{key:"componentDidMount",value:function e(){!1!==c.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function e(t){var n=p(Object.keys(this.props)).concat(p(Object.keys(t))),r=!0,o=!1,a=void 0;try{for(var i=n[Symbol.iterator](),c;!(r=(c=i.next()).done);r=!0){var l=c.value;if("resourceData"===l){if(!x(this.props.resourceData,t.resourceData))return!0}else if(this.props[l]!==t[l])return!0}}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function e(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(i.map(function(e){return v({},e,{options:k(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.error,o=n.isAtEnd,a=n.isFetching,i=n.resourceData,c=n.resourceLoaded,l=d(n,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete l.onResourceError,delete l.onResourceLoaded,u.createElement(s,Object.assign({},i,l,{error:r,fetchMoreData:function e(){return t.loadMoreData(t.props)},isAtEnd:o,isFetching:a,refreshData:function e(){return t.loadData(t.props)},resourceLoaded:c}))}}]),a}(u.Component),C(e,"WrappedComponent",s),C(e,"displayName",1===i.length?i[0].name:"".concat(i.length," resources")),t}},T=function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t={name:n.name,options:n.options||{},key:n.key||"data"};return Object(o.connect)(P(e)([t]))(D([t],r)(e))}},R=T;t.b=T;var B=function e(t){var a=t.name,i=t.options;return function(e,t){var n=e.resources.data;if(n[a]){var r=k(i,t),o;if(n[a][r])return{data:n[a][r].data}}return{data:null}}};function M(e){var t=e.name,n=e.options;return Object(o.connect)(B({name:t,options:n||{}}))}},pOmq:function(e,t,n){"use strict";function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}t.a=r},pS3G:function(e,t,n){var o=n("mM+c"),a=n("WoY6"),i=n("SYDU"),r=1;function c(e,t,n){var r=t?n(i(e),1):i(e);return a(r,o,new e.constructor)}e.exports=c},qZXM:function(e,t,n){"use strict";var r=n("4Qfy"),o=n("MY3l"),a=function e(t){var n=r.a.instance&&r.a.instance.getState()||{viewer:{}};return!n.viewer.isAuth||n.viewer.isLimitedLogin?function(e){return r.a.instance.dispatch(o.a)}:t};t.a=a},rJ1s:function(e,t){function n(){return[]}e.exports=n},tsKt:function(e,t,n){var r=n("heHu"),o=n("dY7Z");function a(e,t){return e&&r(t,o(t),e)}e.exports=a},uIsx:function(e,t,n){"use strict";t.a=l;var o=n("BAXv"),r=n("THYI"),a=n.n(r),i=n("HLDn"),c=n("S+Qs");function l(e,r){var t={name:e,privacy:o.a.BoardPrivacy.PUBLIC};return function(n){return a.a.create("BoardResource",t).callCreate().then(function(e){var t=e.resource_response.data;return n(r.username&&Object(c.f)("BoardsResource",Object(i.a)(r.username,!1))),t})}}},vJNz:function(e,t,n){"use strict";t.b=k;var O=n("d6ZO"),r=n.n(O),j=n("iSgY"),I=n("BAXv"),C=n("W/Cr"),x=n("gEaE");function k(o,a){var e=o&&1<o.length?new RegExp(o,"i"):"",t;return o&&1<o.length?a.split(e).reduce(function(e,t,n){if(0<e.length&&o&&o.length){var r=a.toLowerCase().indexOf(o.toLowerCase());return e.concat(O.createElement("em",{key:n,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},a.substring(r,r+o.length)),t)}return[t]},[]):a}function o(e){var t=e.disabled,n=e.item,r=e.isSection,o=e.isSelectMode,a=e.isWithinSectionPicker,i=e.saveState,c=e.searchQuery,l=e.selected,s=e.size,u=r?null:n,d=r?n:null,f=d&&d.title||u&&u.name||"",p="",b=!1,h="",m=0;if(u){p=u.image_cover_url,b=u.is_collaborative,h=u.privacy;var y=u.section_count;m=void 0===y?0:y}var v=k(c,f),
g=h===I.a.BoardPrivacy.SECRET,E=!t&&(l||!!i),_=!a&&0<m,w=0<m?"boardWithSection":"boardWithoutSection",S=o?C.a._("Select","Board select button label"):C.a._("Save","Pin save button label");return O.createElement(x.b,{alignItems:"center",color:E?"lightGray":"white",display:"flex",paddingX:"lg"===s?4:6,paddingY:2,"data-test-id":w},O.createElement(x.b,{height:"lg"===s?40:36,width:"lg"===s?40:36,color:"lightGray",overflow:"hidden",shape:"rounded",marginRight:2,flex:"none"},p?O.createElement(x.p,{src:p,alt:f,fit:"cover",naturalWidth:1,naturalHeight:1}):O.createElement("span",null)),O.createElement(x.b,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},O.createElement(x.K,{color:t?"gray":"darkGray",bold:!0,size:"lg"===s?"xl":"md",truncate:!0},v),(_||!E)&&O.createElement(x.b,{alignItems:"center",display:"flex"},g&&O.createElement(j.a,{type:"secret"}),b&&O.createElement(j.a,{type:"group"}),_&&O.createElement(j.a,{type:"sections"})),!_&&E&&!i&&O.createElement(x.b,{alignItems:"center","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,dangerouslySetInlineStyle:{__style:{backgroundColor:"#e60023",borderRadius:"4px"}}},!o&&O.createElement(x.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},O.createElement(x.n,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),O.createElement(x.K,{bold:!0,color:"white",size:"sm",overflow:"normal"},S)),!_&&E&&"loading"===i&&O.createElement(x.b,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},O.createElement(x.G,{accessibilityLabel:C.a._("Saving","Accessibility label for saving a pin to a board"),show:!0}))))}o.defaultProps={size:"md"},t.a=o},xGyi:function(e,t,n){"use strict";n.d(t,"a",function(){return R});var r=n("d6ZO"),u=n.n(r),o=n("DUIN"),l=n("HEYN"),d=n("W/Cr"),f=n("Y5gj"),a=n("JyNp"),i=n("MQ2h"),c=n.n(i),s=n("n9Oa"),p=n("vJNz"),b=n("Qqx1"),h=n("gEaE");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e){return E(e)||g(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function E(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P="NO_SECTION_VALUE";function D(e){var t=e.section,n=e.hovered,r=e.searchQuery;return u.a.createElement(h.b,null,u.a.createElement(h.b,{color:n?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},u.a.createElement(h.b,{flex:"grow"},u.a.createElement(h.K,{bold:!0},Object(p.b)(r,t.title)))),t.id===P&&u.a.createElement(h.j,null))}var T,R=function(e){function o(){var e,c;_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(x(x(c=O(this,(e=j(o)).call.apply(e,[this].concat(n))))),"state",{searchQuery:""}),k(x(x(c)),"getPickerSections",function(){var e=c.state.searchQuery,t=c.props,n=t.sectionsResource,r=t.mergingFromSectionId,o=n&&n.data||[];return o=r?o.filter(function(e){return e.id!==r}):[{id:P,title:d.a._("No section","default dropdown option for selecting a board section on pin edit")}].concat(y(o)),e.length>=b.a&&(o=Object(s.a)(o,e,"title")),[{items:o}]}),k(x(x(c)),"createBtnDisabled",function(){var e=c.props.sectionsResource,t=c.state.searchQuery;return!(!e||!e.data)&&e.data.some(function(e){return e.title.toLowerCase()===t.toLocaleLowerCase()})}),k(x(x(c)),"handleSectionCreate",function(){var e=c.props,t=e.board,n=e.onSectionChange,r=e.sectionsResource,o=e.dispatch,a=e.onSectionCreate,i=c.state.searchQuery;a?a(i):o&&t.id&&o(Object(l.a)({boardId:t.id,name:i})).then(function(e){r&&r.refreshData(),c.setState({searchQuery:""}),n(e)})}),k(x(x(c)),"handleSectionSelected",function(e){var t=c.props.onSectionChange;e.id===P?t(null):t(e),c.setState({searchQuery:""})}),k(x(x(c)),"handleSearchQueryUpdate",function(e){c.setState({searchQuery:e})}),k(x(x(c)),"renderRow",function(e){var t=e.item,n=e.hovered,r=c.state.searchQuery;return u.a.createElement(D,{section:t,hovered:n,searchQuery:r})}),c}return I(o,e),S(o,[{key:"componentDidUpdate",value:function e(t){var n=t.selectedSectionId,r;if(this.props.selectedSectionId!==n){var o=this.props.sectionsResource;o&&o.refreshData()}}},{key:"render",value:function e(){var t=this.props,n=t.sectionsResource,r=t.selectedSectionId,o=t.mergingFromSectionId,a=t.selectedSectionName,i=this.state.searchQuery,c,l=o?d.a._("Pick a section","default dropdown option for selecting a board section to merge to"):d.a._("No section","default dropdown option for selecting a board section on pin edit"),s;r?(n&&n.data&&(s=n.data.find(function(e){return e.id===r})),l=s&&s.title||l):a&&(l=a);return u.a.createElement(h.b,null,u.a.createElement(h.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!n||!n.isLoaded}),(!n||n&&n.isLoaded)&&u.a.createElement(f.a,{dropdownValue:l,onCreate:o?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:i,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}}]),o}(r.Component);t.b=Object(i.compose)(Object(o.connect)(),Object(a.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function e(t){return{board_id:t.board.id}}},{allowStale:!1}))(R)},xWQP:function(e,t){var n=/\w*$/;function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}e.exports=r},ymrh:function(e,t,n){"use strict";var s=n("d6ZO"),A=n.n(s),r=n("DUIN"),L=n("djV9"),N=n("+51L"),F=n("uHNA"),o=n("9FFf"),u=n.n(o),H=n("W9T9"),U=n("lip+"),a=n("BAXv"),i=n("uIsx"),c=n("HEYN"),l=n("Esb+"),B=n.n(l),Q=n("W/Cr"),W=n("R6a3"),d=n("hkVh"),Y=n("rgtM"),f=n("FTnl"),p=n("kxCB"),z=n("gEaE");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?w(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(w(w(t=v(this,(e=g(a)).call.apply(e,[this].concat(r))))),"state",{deleting:!1}),S(w(w(t)),"unmounted",!1),S(w(w(t)),"handleConfirm",function(){if(!t.state.deleting){var e=t.props.onDeletePin;t.setState({deleting:!0}),e().then(function(){return t.handleDeleteDidComplete()}).catch(function(e){return t.handleDeleteDidComplete(e)})}}),S(w(w(t)),"handleDeleteDidComplete",function(e){t.unmounted||t.setState({deleting:!1}),e||t.props.showToast(function(e){var t=e.onHide;return A.a.createElement(f.a,{onHide:t,text:Q.a._("Pin deleted!","User deleted their pin")})})}),t}return E(a,e),y(a,[{key:"componentWillUnmount",value:function e(){this.unmounted=!0}},{key:"render",value:function e(){var t=this.props.onDismiss,n=this.state.deleting;return A.a.createElement(W.a,{accessibilityCloseLabel:Q.a._("Close","Accessible label for button to close confirm delete pin modal"),heading:Q.a._("Are you sure?","Confirm the user wants to delete the pin"),accessibilityModalLabel:Q.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:t,footer:A.a.createElement(z.b,{display:"flex",justifyContent:"end",marginLeft:-1,marginRight:-1},A.a.createElement(z.b,{paddingX:1},A.a.createElement(z.c,{onClick:t,text:Q.a._("Cancel")})),A.a.createElement(z.b,{paddingX:1},A.a.createElement(Y.a,{id:"confirm-delete-pin"},A.a.createElement(d.a,{color:"red",onClick:this.handleConfirm,text:Q.a._("Delete Pin"),submitting:n}))))},A.a.createElement(z.b,{padding:4},A.a.createElement(z.K,null,Q.a._("Once you delete a Pin, you can't undo it!"))))}}]),a}(A.a.PureComponent),j=Object(p.a)(O);j.displayName="DeletePinConfirmation";var G=j,I=n("NCQM");function V(e){var t=e.board,n=e.canEdit,r=e.onBoardChange,o=e.onBoardCreate;return s.createElement(z.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},s.createElement(z.b,{xs:{column:12},md:{column:3},paddingY:2},s.createElement(z.q,{htmlFor:"BoardPicker"},s.createElement(z.K,{size:"sm"},Q.a._("Board")))),n?s.createElement(z.b,{xs:{column:12},md:{column:8}},s.createElement(I.a,{id:"BoardPicker",board:t,onBoardChosen:r,onBoardCreate:o})):s.createElement(z.b,{xs:{column:12},md:{column:8},paddingY:2},s.createElement(z.K,{bold:!0,size:"sm"},t.name)))}var K=n("3ZhG");function X(e){var t=e.canEdit,n=e.description,r=e.onDescriptionChange,o=e.errorMessage;return s.createElement(s.Fragment,null,s.createElement(z.j,null),s.createElement(z.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},s.createElement(z.b,{xs:{column:12},md:{column:3},paddingY:2},s.createElement(z.q,{htmlFor:"DescriptionField"},s.createElement(z.K,{size:"sm"},Q.a._("Description")))),t?s.createElement(z.b,{xs:{column:12},md:{column:8}},s.createElement(z.b,null,s.createElement(z.L,{id:"DescriptionField",placeholder:Q.a._("Tell us about this Pin..."),value:n,onChange:r,hasError:0<(o||"").length})),!!o&&s.createElement(z.b,{justifyContent:"center"},s.createElement(K.a,{errorMessage:o,htmlFor:"pin-edit-description"}))):s.createElement(z.b,{xs:{column:12},md:{column:8},paddingY:2},s.createElement(z.K,{bold:!0,size:"sm"},n))))}var C=n("xGyi");function Z(e){var t=e.board,n=e.canEdit,r=e.currentSection,o=e.onSectionChange,a=e.onSectionCreate,i=e.sectionId,c=e.sectionName,l=t.id?C.b:C.a;return s.createElement(z.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},s.createElement(z.b,{xs:{column:12},md:{column:3},paddingY:3},s.createElement(z.q,{htmlFor:"SectionPicker"},s.createElement(z.K,{size:"sm"},Q.a._("Section","label for editing a Pin's board section")))),n?s.createElement(z.b,{xs:{column:12},md:{column:8}},s.createElement(l,{id:"SectionPicker",board:t,onSectionChange:o,selectedSectionId:i,selectedSectionName:c,onSectionCreate:a})):s.createElement(z.b,{xs:{column:12},md:{column:8},paddingY:2},s.createElement(z.K,{bold:!0,size:"sm"},r&&!(t||{}).is_collaborative?r.title:Q.a._("No section","default dropdown option for selecting a board section on pin edit"))))}function J(e){var t=e.onTitleChange,n=e.title,r=e.errorMessage;return s.createElement(s.Fragment,null,s.createElement(z.j,null),s.createElement(z.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},s.createElement(z.b,{xs:{column:12},md:{column:3},paddingY:2},s.createElement(z.q,{htmlFor:"TitleField"},s.createElement(z.K,{size:"sm"},Q.a._("Title","Label for editing title of pin")))),s.createElement(z.b,{xs:{column:12},md:{column:8}},s.createElement(z.b,null,s.createElement(z.M,{id:"TitleField",value:n,onChange:t,hasError:0<(r||"").length})),!!r&&s.createElement(z.b,{justifyContent:"center"},s.createElement(K.a,{errorMessage:r,htmlFor:"pin-edit-title"})))))}function q(e){var t=e.onChangeWebsite,n=e.link,r=e.errorMessage;return s.createElement(s.Fragment,null,s.createElement(z.j,null),s.createElement(z.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},s.createElement(z.b,{xs:{column:12},md:{column:3},paddingY:2},s.createElement(z.q,{htmlFor:"WebsiteField"},s.createElement(z.K,{size:"sm"},Q.a._("Website")))),s.createElement(z.b,{xs:{column:12},md:{column:8}},s.createElement(z.b,null,s.createElement(z.M,{id:"WebsiteField",value:n,onChange:t,hasError:0<(r||"").length})),!!r&&s.createElement(z.b,{justifyContent:"center"},s.createElement(K.a,{errorMessage:r,htmlFor:"pin-edit-website"})))))}var x=n("Cjb7"),k=n("THYI"),M=n.n(k),P=n("pN+K"),D=n("EfF6"),$=n("6oz1"),T=n("S+Qs"),ee=n("woYD"),R=n("D+PP"),te=n("MQ2h"),ne=n.n(te),re=n("FrUj"),oe=n("NmQ5");function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){he(t,e,n[e])})}return t}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function ue(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?be(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}function pe(e,t){return(pe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(e){function o(){var e,R;ce(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return he(be(be(R=ue(this,(e=de(o)).call.apply(e,[this].concat(n))))),"state",{board:R.props.data&&R.props.data.board||null,commentsDisabled:R.props.data&&R.props.data.comments_disabled||!1,description:R.props.data&&R.props.data.description.trim()||"",link:R.props.data&&R.props.data.link||"",photosDisabled:R.props.data&&R.props.data.did_it_disabled||!1,sectionId:R.props.data&&R.props.data.section&&R.props.data.section.id||null,sectionName:R.props.data&&R.props.data.section&&R.props.data.section.title||null,showDeleteConfirmation:!1,carousel_data:R.props.data&&R.props.data.carousel_data||null,title:R.props.data&&R.props.data.title||"",isProcessing:!1,currentIndex:void 0!==R.props.carouselSlotCurrentIndex?R.props.carouselSlotCurrentIndex:R.props.data&&R.props.data.carousel_data&&R.props.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1}),he(be(be(R)),"onClickDeleteButton",function(){return R.setState({showDeleteConfirmation:!0})}),he(be(be(R)),"onHideConfirmation",function(){return R.setState({showDeleteConfirmation:!1})}),he(be(be(R)),"updateCarouselSlotIndex",function(){var e=R.props.carouselSlotCurrentIndex;R.setState({currentIndex:void 0!==e?e:R.props.data&&R.props.data.carousel_data&&R.props.data.carousel_data.index||0})}),he(be(be(R)),"handleBoardChange",function(e){var t=R.state.board.id;e.id!==t&&R.setState({board:e,sectionId:null,sectionName:null})}),he(be(be(R)),"createBoard",function(o,e){var t=R.state.board,n;!t.id&&t.name&&e&&(0,R.props.dispatch)(Object(i.a)(t.name,e)).then(function(e){if(R._isMounted){var t=R.state,n=t.sectionId,r=t.sectionName;!n&&r?(R.setState({board:e}),R.createSection(o)):(R.handleBoardChange(e),R.handleSave(o))}})}),he(be(be(R)),"handleBoardCreateClick",function(e){if(e){var t={name:e,privacy:a.a.BoardPrivacy.PUBLIC};R.setState({board:t,sectionId:null,sectionName:null})}}),he(be(be(R)),"createSection",function(t){var e=R.state,n=e.board,r=e.sectionName;if(r)if(n.id){var o={boardId:n.id,name:r},a;(0,R.props.dispatch)(Object(c.a)(o)).then(function(e){R._isMounted&&(R.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),R.handleSave(t))})}else R.createBoard(t)}),he(be(be(R)),"handleSectionCreateClick",function(e){var t;0!==e.length&&(R.state.board&&R.setState({sectionId:null,sectionName:e}))}),he(be(be(R)),"handleSectionChange",function(e){return R.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null})}),he(be(be(R)),"handleDeletePin",function(){var e=R.props,r=e.data,o=e.pinId,a=e.onDelete,i=e.onHide,c=e.changeBoardPinCount,l=e.changeUserPinCount,t=e.advertiser_id,n=ie({},t?{advertiser_id:t}:{},{id:o});return M.a.create("PinResource",n).callDelete().then(function(){if(R._isMounted){var e=r.board.id,t=r.pinner.id,n=r.section;c({boardId:e,sectionId:n&&n.id||void 0,increment:-1}),l({userId:t,increment:-1}),x.a.instance.publish(e,"pinDeleted",o),x.a.instance.publish(t,"pinDeleted"),x.a.instance.publish(o,"pinDeleted"),i(),a&&a()}})}),he(be(be(R)),"sanitizeCarouselData",function(e){var t=R.state.carousel_data;if(e&&(t=e),t){var n,r=t.carousel_slots;if(r){var o={carousel_slots:[]};return r.forEach(function(e){var t={};t.description=e.details||"",t.title=e.title||"",t.link=e.link||"",o.carousel_slots.push(t)}),o}}return null}),he(be(be(R)),"triggerBoardAndSectionCreate",function(o,a){return function(){var e=R.state,t=e.board,n=e.sectionId,r=e.sectionName;!t.id&&t.name?R.createBoard(o,a):!n&&r?R.createSection(o):R.handleSave(o)}}),he(be(be(R)),"handleSave",function(e){R.setState({isProcessing:!0});var t=R.props,n=t.advertiser_id,r=t.pinId,o=R.state.carousel_data,a;if(e&&o){var i=R.sanitizeCarouselData();i&&(a=JSON.stringify(i))}var c=ie({board_id:R.state.board.id,board_section_id:R.state.sectionId,carousel_data_json:a,description:R.state.description,disable_comments:R.state.commentsDisabled,disable_did_it:R.state.photosDisabled,id:r,link:R.state.link,title:R.state.title},n?{advertiser_id:n}:{}),l=R.props,s=l.data,u=s.board,d=s.title,f=s.description,p=s.section,b=s.carousel_data,h=l.invalidatePinResource,m=l.onHide,y=R.state,v=y.board,g=void 0===v?u:v,E=y.title,_=y.description,w=y.sectionId,S=y.carousel_data,O=p&&p.id||null,j=g.id,I=u.id,C=I!==j,x=!(!O&&!w||O===w),k=!(!d.trim().length&&!E.trim().length||d===E),P=!(!f.trim().length&&!_.trim().length||f===_),D=!!S&&!!b&&!B()(S,b),T;C||x||k||P||D?M.a.create("PinResource",c).callUpdate().then(function(e){if(R._isMounted){var t=R.props,n=t.changeBoardPinCount,r=t.onSubmit,o=t.pinId,a=t.pinMoved,i=t.view,c=t.viewParameter;(C||x)&&j&&I&&(a({selectedPinIds:[o],source:{boardId:I,sectionId:O},target:{boardId:j,sectionId:w}}),n({boardId:j,sectionId:w||void 0,increment:1}),n({boardId:I,sectionId:O||void 0,increment:-1})),r&&j&&g.url&&r({boardId:j,title:g.name,sectionId:w,url:g.url}),m(),h(o);var l={};l.objectId=o,C&&(l.board_was_modified=!0),!C&&x&&(l.board_section_was_modified=!0),P&&(l.original_pin_description=f,l.edited_pin_description=_),D&&(l.original_carousel_data=JSON.stringify(R.sanitizeCarouselData(b)),l.edited_carousel_data=JSON.stringify(R.sanitizeCarouselData(S))),Object(ee.a)(2,ie({component:208,view:i,viewParameter:c},l))}}).catch(function(){var e=R.state,t=e.shouldShowValidationTitleError,n=e.shouldShowValidationDescriptionError,r=e.shouldShowValidationLinkFormatError;R.setState({isProcessing:!1,shouldShowGenericUpdateError:!t&&!n&&!r})}):(m(),h(r)),R.setState({isProcessing:!1})}),he(be(be(R)),"handleTextChanges",function(t,n){var e=R.state.carousel_data;if(e){var r=u()(e),o=r.carousel_slots,a=void 0===o?[]:o,i=R.state,c=i.currentIndex,l=i.shouldApplyTextToAll,s=R.valueIsValidForType(t,n);if(l?a.forEach(function(e){return e[n]=t}):a[c]&&(a[c][n]=t),0===c)switch(n){case"details":R.setState({description:t,carousel_data:r||null,shouldShowValidationDescriptionError:!s,shouldShowGenericUpdateError:!1});break;case"link":R.setState({link:t,carousel_data:r||null,shouldShowValidationLinkFormatError:!s,shouldShowGenericUpdateError:!1});break;case"title":R.setState({title:t,carousel_data:r||null,shouldShowValidationTitleError:!s,shouldShowGenericUpdateError:!1})}else R.setState({carousel_data:r||null})}}),he(be(be(R)),"handleDescriptionChange",function(e){var t=e.value,n=R.valueIsValidForType(t,"description");R.setState({description:t,shouldShowValidationDescriptionError:!n,shouldShowGenericUpdateError:!1})}),he(be(be(R)),"handleCarouselDetailsChange",function(e){var t=e.value;R.handleTextChanges(t,"details")}),he(be(be(R)),"handleTitleChange",function(e){var t=e.value,n=R.valueIsValidForType(t,"title");R.setState({title:t,shouldShowValidationTitleError:!n,shouldShowGenericUpdateError:!1})}),he(be(be(R)),"handleCarouselTitleChange",function(e){var t=e.value;R.handleTextChanges(t,"title")}),he(be(be(R)),"valueIsValidForType",function(e,t){switch(t){case"details":case"description":return e.length<=500;case"link":return 0<e.length&&0===Object(re.t)([Object(re.s)()],e).length;case"title":return e.length<=100;default:return!0}}),he(be(be(R)),"handleWebsiteChange",function(e){var t=e.value,n=R.valueIsValidForType(t,"link");R.setState({link:t,shouldShowValidationLinkFormatError:!n,shouldShowGenericUpdateError:!1})}),he(be(be(R)),"handleCarouselWebsiteChange",function(e){var t=e.value;R.handleTextChanges(t,"link")}),he(be(be(R)),"handleCommentChange",function(e){return R.setState({commentsDisabled:!e.value})}),he(be(be(R)),"handlePhotoChange",function(e){return R.setState({photosDisabled:!e.value})}),he(be(be(R)),"handleShouldApplyToAll",function(e){if(e){var t=R.state,n=t.currentIndex,r=t.carousel_data;if(!r)return;var o=u()(r),a=o.carousel_slots,i=a[n],c=i.details,l=i.link,s=i.title;a.forEach(function(e){e.details=c,e.title=s,e.link=l}),R.setState({carousel_data:o,shouldApplyTextToAll:e})}else R.setState({shouldApplyTextToAll:e})}),he(be(be(R)),"handleCarouselSlider",function(e){var t=R.state.carousel_data,n=t&&t.carousel_slots&&t.carousel_slots.length||1;0<=e&&e<n&&R.setState({currentIndex:e})}),he(be(be(R)),"handleMouseEnter",function(){R.setState({shouldShowCarouselSliders:!0})}),he(be(be(R)),"handleMouseLeave",function(){R.setState({shouldShowCarouselSliders:!1})}),R}return fe(o,e),se(o,[{key:"componentDidMount",value:function e(){this._isMounted=!0,this.updateCarouselSlotIndex()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.data,r=t.carouselSlotCurrentIndex;n&&this.setState({board:n.board,commentsDisabled:n.comments_disabled,description:n.description&&n.description.trim(),link:n.link,photosDisabled:n.did_it_disabled,sectionId:(n.section||{}).id,sectionName:(n.section||{}).title,title:n.title,carousel_data:n.carousel_data,currentIndex:void 0!==r?r:n.carousel_data&&n.carousel_data.index||0,shouldApplyTextToAll:!1})}},{key:"componentWillUnmount",value:function e(){this._isMounted=!1}},{key:"generateIndexIndicator",value:function e(){var t=this.state,n=t.currentIndex,r=t.carousel_data,o=r&&r.carousel_slots&&r.carousel_slots.length||1;return o<2?"":A.a.createElement(z.b,{direction:"row",padding:2},A.a.createElement(z.q,{htmlFor:"CardsIndex"},A.a.createElement(z.K,{size:"sm"},n+1,"/",o)))}},{key:"render",value:function e(){var c=this,t=this.props,l=t.data,s=t.onHide,u=t.resourceLoaded,d=t.pinId,n=this.state,f=n.board,p=n.commentsDisabled,b=n.description,h=n.link,m=n.photosDisabled,y=n.sectionId,v=n.sectionName,r=n.showDeleteConfirmation,g=n.title,E=n.isProcessing,_=n.carousel_data,w=n.shouldApplyTextToAll,S=n.currentIndex,O=n.shouldShowCarouselSliders,j=n.shouldShowValidationTitleError,I=n.shouldShowValidationDescriptionError,C=n.shouldShowValidationLinkFormatError,x=n.shouldShowGenericUpdateError,o=_&&_.carousel_slots&&0<_.carousel_slots.length&&_.carousel_slots[S]||{},a=o.details,k=void 0===a?"":a,i=o.link,P=void 0===i?"":i,D=o.title,T=void 0===D?"":D;if(r)return A.a.createElement(G,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});var R=l&&(l.access||[]).includes("write")||this.props.canEdit,B=l&&l.story_pin_data_id,M=function e(t){return R&&!(l.aggregated_pin_data&&l.aggregated_pin_data.is_shop_the_look)&&(!l.is_repin||l.link_domain&&l.link_domain.official_user&&l.link_domain.official_user.id===t.id)&&!B};return A.a.createElement($.b,{name:"ads_carousel_edit"},function(e){var t=e.anyEnabled,n=t&&!!_&&1<_.carousel_slots.length,r=n?Q.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins"):Q.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin"),o=n?Q.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins"):Q.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin"),a=n?Q.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):Q.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin"),i=function e(t){return R&&(l.is_native&&l.native_creator&&l.native_creator.id===t.id||n&&!l.is_repin&&l.pinner.id===t.id)};return A.a.createElement(W.a,{accessibilityCloseLabel:Q.a._("Close","Accessible label for button to close edit pin modal"),heading:Q.a._("Edit this Pin","Edit a previously saved pin"),accessibilityModalLabel:Q.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:s,footer:A.a.createElement(z.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},A.a.createElement(z.b,null,A.a.createElement(Y.a,{id:"delete-pin-button"},A.a.createElement(z.c,{text:Q.a._("Delete"),onClick:c.onClickDeleteButton}))),x&&A.a.createElement(z.b,{display:"flex",marginLeft:2,marginTop:2,justifyContent:"center"},A.a.createElement(K.a,{errorMessage:Q.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),A.a.createElement(U.a,null,function(e){return A.a.createElement(z.b,{display:"flex",justifyContent:"between",marginLeft:-2,marginRight:-2},A.a.createElement(z.b,{paddingX:2},A.a.createElement(z.c,{text:Q.a._("Cancel"),onClick:s})),A.a.createElement(z.b,{paddingX:2,"data-test-id":"edit-pin-save"},A.a.createElement(z.c,{text:Q.a._("Save"),color:"red",onClick:c.triggerBoardAndSectionCreate(t,e)})))}))},!u||E?A.a.createElement(z.b,{paddingX:12,paddingY:9},A.a.createElement(z.G,{accessibilityLabel:Q.a._("loading","Accessible label for the edit pin loading icon"),show:!0})):A.a.createElement(U.a,null,function(e){return A.a.createElement(z.b,{md:{display:"flex"},justifyContent:"between"},A.a.createElement(z.b,{xs:{column:12},md:{column:9}},A.a.createElement(V,{board:f||l.board,canEdit:R,onBoardChange:c.handleBoardChange,onBoardCreate:c.handleBoardCreateClick}),A.a.createElement(Z,{board:f||l.board,canEdit:R,currentSection:l.section,onSectionChange:c.handleSectionChange,sectionId:y,sectionName:v,onSectionCreate:c.handleSectionCreateClick}),i(e)&&A.a.createElement(J,{onTitleChange:n?c.handleCarouselTitleChange:c.handleTitleChange,title:n?T:g,errorMessage:j?r:""}),!B&&(n||!_)&&A.a.createElement(X,{canEdit:R,description:n?k:b,onDescriptionChange:n?c.handleCarouselDetailsChange:c.handleDescriptionChange,errorMessage:I?o:""}),M(e)&&(n||!_)&&A.a.createElement(q,{link:n?P:h,onChangeWebsite:n?c.handleCarouselWebsiteChange:c.handleWebsiteChange,errorMessage:C?a:""}),n&&A.a.createElement(z.b,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},A.a.createElement(z.b,{paddingY:2},A.a.createElement(z.q,{htmlFor:"applyTextToAll"},A.a.createElement(z.K,null,Q.a._("Apply text to all","Apply title, description, link to all cards")))),A.a.createElement(z.b,{paddingX:2,paddingY:2},A.a.createElement(z.I,{onChange:function e(t){return c.handleShouldApplyToAll(t.value)},id:"applyTextToAll",switched:w}))),l.can_delete_did_it_and_comments&&A.a.createElement(H.a,{commentsDisabled:p,onCommentChange:c.handleCommentChange,onPhotoChange:c.handlePhotoChange,photosDisabled:m})),A.a.createElement(z.b,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},n?c.generateIndexIndicator():"",A.a.createElement(z.u,{width:236},A.a.createElement(z.b,{onMouseEnter:c.handleMouseEnter,onMouseLeave:c.handleMouseLeave},A.a.createElement(z.u,{shape:"rounded",wash:!0},n&&O&&A.a.createElement(z.b,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},A.a.createElement(F.a,{handleCarouselSwipe:c.handleCarouselSlider,carouselIndex:S,carousel_data:_,pinId:d,isEditMode:!0})),n?A.a.createElement(L.a,{carouselIndex:S,isCloseup:!1,lowResOnly:!1,carousel_data:_,pinId:d,isEditMode:!0}):A.a.createElement(z.p,{alt:b,color:"#efefef",naturalHeight:l.images["474x"].height,src:l.images["474x"].url,naturalWidth:l.images["474x"].width})),n&&A.a.createElement(N.a,{carouselIndex:S,carousel_data:_,pinId:d,handleCarouselSwipe:c.handleCarouselSlider,isEditMode:!0})))))}))})}}]),o}(s.Component),ye=function e(t){return{field_set_key:"detailed",id:t,preserve_component_state:!0}};function ve(e,t){var n=e.advertiser,r=e.viewer;return r.isAuth&&n&&n.owner_user_id!==r.id?{advertiser_id:n.id}:{}}var ge=function e(n){return{invalidatePinResource:function e(t){return n(Object(T.f)("PinResource",ye(t)))},changeBoardPinCount:function e(t){return n(Object(D.d)(t))},changeUserPinCount:function e(t){return n(Object(R.a)(t))},pinMoved:Object(te.bindActionCreators)(oe.b,n)}},Ee=t.a=Object(te.compose)(Object(P.b)({name:"PinResource",options:function e(t){return ye(t.pinId)}}),Object(r.connect)(ve,ge))(me)}});